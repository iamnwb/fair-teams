!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="338b8fe3-8917-4e75-ad3d-aa220a939d9a",e._sentryDebugIdIdentifier="sentry-dbid-338b8fe3-8917-4e75-ad3d-aa220a939d9a")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[398,4986],{8848:(e,t,a)=>{var s=a(35902),r=a(80544),n=Math.max;e.exports=function(e,t,a){var l=null==e?0:e.length;if(!l)return -1;var o=null==a?0:r(a);return o<0&&(o=n(l+o,0)),s(e,t,o)}},14528:(e,t,a)=>{"use strict";a.d(t,{A:()=>x});var s=a(80263),r=a(58378),n=a(69724),l=a(23445),o=a(15601),i=a.n(o),d=a(53239),c=a(40022);let u=(0,d.forwardRef)((e,t)=>{let{icon:a,title:o,description:u,url:x,urlLabel:m="Read more",defaultVisibility:f=!1,hideCollapse:h=!1,button:p,className:g="",block:y=!1}=e,[b,j]=(0,d.useState)(f);return(0,s.jsx)("div",{ref:t,role:"alert",className:"".concat(y?"block w-full":"","\n      block w-full rounded-md border bg-surface-300/25 py-3 ").concat(g),children:(0,s.jsxs)("div",{className:"flex flex-col px-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex w-full space-x-3 items-center",children:[a&&(0,s.jsx)("span",{className:"text-foreground-lighter",children:a}),(0,s.jsx)("div",{className:"flex-grow",children:(0,s.jsx)("h5",{className:"text-sm text-foreground",children:o})})]}),u&&!h?(0,s.jsx)("div",{className:"cursor-pointer text-foreground-lighter",onClick:()=>j(!b),children:b?(0,s.jsx)(r.A,{size:14,strokeWidth:1.5}):(0,s.jsx)(n.A,{size:14,strokeWidth:1.5})}):null]}),(u||x||p)&&(0,s.jsxs)("div",{className:"flex flex-col space-y-3 overflow-hidden transition-all ".concat(b?"mt-3":""),style:{maxHeight:500*!!b},children:[(0,s.jsx)("div",{className:"text-foreground-light text-sm",children:u}),x&&(0,s.jsx)("div",{children:(0,s.jsx)(c.$,{asChild:!0,type:"default",icon:(0,s.jsx)(l.A,{}),children:(0,s.jsx)(i(),{href:x,target:"_blank",rel:"noreferrer",children:m})})}),p&&(0,s.jsx)("div",{children:p})]})]})})});u.displayName="InformationBox";let x=u},24771:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(80263);a(53239);let r=function(e){let{children:t,target:a="_blank",href:r,className:n,onClick:l,style:o}=e;return(0,s.jsx)("a",{onClick:l,href:r,target:a,rel:"noopener noreferrer",style:o,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})}},31695:(e,t,a)=>{"use strict";a.d(t,{YX:()=>d,_4:()=>c,gI:()=>i,ge:()=>o,lB:()=>l});var s=a(80263),r=a(53239),n=a(51500);let l=e=>{let{children:t,header:a,footer:r}=e;return(0,s.jsxs)(o,{"data-sentry-element":"FormPanelContainer","data-sentry-component":"FormPanel","data-sentry-source-file":"FormPanel.tsx",children:[a&&(0,s.jsx)(i,{children:a}),(0,s.jsx)(d,{className:"divide-y","data-sentry-element":"FormPanelContent","data-sentry-source-file":"FormPanel.tsx",children:t}),r&&(0,s.jsx)(c,{children:r})]})},o=(0,r.forwardRef)((e,t)=>{let{children:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)("bg-surface-100 border overflow-hidden rounded-md shadow max-w-full",r.className),children:a})});o.displayName=o.displayName;let i=(0,r.forwardRef)((e,t)=>{let{children:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)("border-default border-b px-8 py-4",r.className),children:a})});i.displayName=i.displayName;let d=(0,r.forwardRef)((e,t)=>{let{children:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)("divide-border flex flex-col gap-0",r.className),children:a})});d.displayName=d.displayName;let c=(0,r.forwardRef)((e,t)=>{let{children:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)("border-t",r.className),children:a})});c.displayName=c.displayName},34859:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/settings/api",function(){return a(99047)}])},36902:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(15740).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},39412:(e,t,a)=>{"use strict";a.d(t,{xf:()=>p,sD:()=>j,Oe:()=>w,DG:()=>v,hw:()=>g});var s=a(80263),r=a(25643),n=a(96572),l=a(80903),o=a(53239),i=a(79279),d=a(32682),c=a(51500),u=a(2119),x=a(61965);let m=o.createContext(null),f=(0,c.cn)("relative text-foreground-lighter text-left px-2 py-1.5 rounded","hover:text-foreground hover:!bg-overlay-hover w-full flex items-center space-x-2","peer-data-[value=true]:bg-overlay-hover peer-data-[value=true]:text-strong");function h(){let e=o.useContext(m);if(!e)throw Error("useMultiSelect must be used within a MultiSelectProvider");return e}function p(e){var t;let{values:a=[],onValuesChange:r,disabled:n,dir:l,size:i,className:d,children:u,...f}=e,h=o.useRef(null),[p,g]=o.useState(!1),[y,b]=o.useState(""),[j,v]=o.useState(-1),w=o.useCallback(e=>{a.includes(e)?r(a.filter(t=>t!==e)||[]):r([...a,e])},[a]);t=()=>{p&&g(!p)},(0,o.useEffect)(()=>{let e=e=>{!h.current||h.current.contains(e.target)||t(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[h,t]);let N=o.useCallback(e=>{switch(e.key){case"Backspace":case"Delete":a.length>0&&0===y.length&&(-1!==j&&j<a.length?(r(a.filter(e=>e!==a[j])),v(j-1<0?0:j-1)):r(a.filter(e=>e!==a[a.length-1])));break;case"Escape":if(-1!==j?v(-1):g(!1),h.current){let e=h.current.querySelector('button[role="combobox"]');e&&e.focus()}break;case"Enter":g(!0)}},[a,y,j]);return(0,s.jsx)(m.Provider,{value:{values:a,toggleValue:w,onValuesChange:r,open:p,setOpen:g,inputValue:y,setInputValue:b,activeIndex:j,setActiveIndex:v,size:i||"small",disabled:n},"data-sentry-element":"unknown","data-sentry-component":"MultiSelector","data-sentry-source-file":"multi-select.tsx",children:(0,s.jsx)(x.uB,{ref:h,onKeyDown:N,className:(0,c.cn)("relative w-auto overflow-visible bg-transparent flex flex-col",d),dir:l,...f,"data-sentry-element":"Command","data-sentry-source-file":"multi-select.tsx",children:u})})}(0,i.F)("",{variants:{size:{...d.vs}},defaultVariants:{size:d.FE}});let g=o.forwardRef((e,t)=>{let{label:a,persistLabel:l=!1,className:i,deletableBadge:d=!0,badgeLimit:x=9999,showIcon:m=!0,mode:f="combobox",children:p,...g}=e,{activeIndex:y,values:j,setInputValue:v,toggleValue:w,disabled:N,setOpen:A}=h(),S=o.useRef(null);o.useImperativeHandle(t,()=>S.current);let P=o.useRef(null),I=o.useRef(null),[C,k]=o.useState([]),[_,M]=o.useState(0),[R,E]=o.useState(!1),T="wrap"===x,D="number"==typeof x,z="inline-combobox"===f;o.useEffect(()=>{(null==S?void 0:S.current)&&I.current&&(T?(k(j),M(0)):(k(j.slice(0,x)),M(Math.max(0,j.length-x))))},[j,x]);let H="rounded shrink-0 px-1.5",F=o.useCallback(e=>{A(!0),v(""),z&&(e.stopPropagation(),e.preventDefault(),setTimeout(()=>{var e;null==(e=P.current)||e.focus()},100))},[]);return(0,s.jsxs)("button",{ref:S,onClick:e=>!R&&F(e),disabled:N,type:"button",role:"combobox",className:(0,c.cn)("flex w-full min-w-[200px] min-h-[40px] items-center justify-between rounded-md border","border-alternative bg-foreground/[.026] px-3 py-2 text-sm","ring-offset-background placeholder:text-muted-foreground","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","hover:border-primary transition-colors duration-200",i),...g,children:[(0,s.jsxs)("div",{ref:I,className:(0,c.cn)("flex gap-1 -ml-1 overflow-hidden flex-1",T&&"flex-wrap",!T&&"overflow-x-auto scrollbar-thin scrollbar-track-transparent transition-colors scrollbar-thumb-muted-foreground dark:scrollbar-thumb-muted scrollbar-thumb-rounded-lg"),children:[C.map(e=>(0,s.jsxs)(u.E,{className:H,children:[e,d&&(0,s.jsx)("div",{onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),onClick:t=>{t.stopPropagation(),w(e),E(!1)},className:"ml-1 text-foreground-lighter hover:text-foreground-light transition-colors pointer-events-auto",children:(0,s.jsx)(r.A,{size:12})})]},e)),_>0&&(0,s.jsx)(u.E,{className:H,children:D&&x<1?"".concat(_," item").concat(_>1?"s":""," selected"):"+".concat(_)}),(0,s.jsx)("span",{className:(0,c.cn)("text-foreground-muted whitespace-nowrap leading-[1.375rem] ml-1 opacity-0 transition-opacity hidden",!z&&(l||0===j.length)&&"opacity-100 visible inline"),children:a}),z&&(0,s.jsx)(b,{ref:P,showSearchIcon:!1,onValueChange:-1===y?v:void 0,placeholder:a,autoFocus:!1,wrapperClassName:(0,c.cn)("px-0 flex-1 border-none truncate",T&&"min-w-[85px]"),className:"py-0 px-1 truncate"})]}),m&&(0,s.jsx)(n.A,{size:16,strokeWidth:2,className:"text-foreground-lighter shrink-0 ml-1.5"})]})});g.displayName="MultiSelectorTrigger",p.Trigger=g;let y=(0,i.F)("bg-control border",{variants:{size:{...d.vs}},defaultVariants:{size:d.FE}}),b=o.forwardRef((e,t)=>{let{className:a,wrapperClassName:r,showResetIcon:n,showSearchIcon:l,...i}=e,{open:d,setOpen:u,inputValue:m,setInputValue:f,activeIndex:p,setActiveIndex:g,size:b,disabled:j}=h(),v=o.useRef(null);o.useImperativeHandle(t,()=>v.current);let w=()=>{setTimeout(()=>{(null==v?void 0:v.current)&&d&&v.current.focus()},100)};return(0,o.useEffect)(()=>{if(w(),!d){var e;null==(e=v.current)||e.blur()}},[d]),(0,s.jsx)(x.G7,{ref:v,value:m,onValueChange:-1===p?f:void 0,onFocus:()=>u(!0),onClick:()=>g(-1),tabIndex:d?0:-1,disabled:j,showSearchIcon:l,showResetIcon:n,handleReset:()=>{f(""),w()},wrapperClassName:r,className:(0,c.cn)(y({size:b}),"text-sm bg-transparent h-full flex-grow border-none outline-none placeholder:text-foreground-muted flex-1",-1!==p&&"caret-transparent",a),...i})});b.displayName="MultiSelectorInput",p.Input=b;let j=o.forwardRef((e,t)=>{let{className:a,children:r}=e,{open:n}=h();return(0,s.jsx)("div",{ref:t,className:(0,c.cn)("absolute w-full bg-overlay shadow-md z-10 border border-overlay top-[calc(100%+0.25rem)] rounded-md transition-all -translate-y-3",n?"opacity-100 translate-y-0 visible duration-150 ease-[.76,0,.23,1]":"opacity-0 -translate-y-3 invisible duration-0",a),children:n&&r})});j.displayName="MultiSelectorContent",p.Content=j;let v=o.forwardRef((e,t)=>{let{className:a,children:r,creatable:n=!1}=e,{open:l,inputValue:o,setInputValue:i,toggleValue:d}=h(),u=r?Array.isArray(r)?r:"object"==typeof r&&"props"in r?r.props.children:[]:[],m=u.filter(e=>!!e.props.value).map(e=>e.props.value.toLowerCase()).some(e=>e===o.toLowerCase());return(0,s.jsxs)(x.oI,{ref:t,className:(0,c.cn)("p-2 flex flex-col gap-2 scrollbar-thin scrollbar-track-transparent transition-colors","scrollbar-thumb-muted-foreground dark:scrollbar-thumb-muted","scrollbar-thumb-rounded-lg w-full max-h-[300px] overflow-y-auto",a),children:[r,n&&o.length>0&&!m?(0,s.jsxs)(x.h_,{role:"option",onSelect:()=>{l&&d(o),i("")},className:f,children:['Create "',o,'"']}):n&&0===u.length?(0,s.jsx)("div",{className:"p-2 py-1.5 text-xs text-foreground-lighter font-italic",children:"Type to add a value"}):(0,s.jsx)(x.xL,{children:(0,s.jsx)("span",{className:"text-foreground-muted",children:"No results found"})})]})});v.displayName="MultiSelectorList",p.List=v;let w=o.forwardRef((e,t)=>{let{className:a,value:r,children:n,...o}=e,{values:i,setInputValue:d,toggleValue:u,open:m}=h(),p=i.includes(r);return(0,s.jsxs)(x.h_,{ref:t,tabIndex:m?0:-1,role:"option",onSelect:()=>{m&&u(r),d("")},className:(0,c.cn)(f,a),...o,children:[(0,s.jsx)("div",{className:(0,c.cn)("flex items-center justify-center","peer h-4 w-4 shrink-0 rounded border border-control bg-control/25 ring-offset-background","transition-colors duration-150 ease-in-out","hover:border-strong","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-foreground data-[state=checked]:text-background",p?"bg-foreground text-background":"[&_svg]:invisible"),children:(0,s.jsx)(l.A,{className:"h-3 w-3",strokeWidth:4})}),(0,s.jsx)("div",{className:"text-xs flex-grow leading-none pointer-events-none cursor-pointer peer-disabled:cursor-not-allowed peer-disabled:pointer-events-none peer-disabled:opacity-50",children:n})]})});w.displayName="MultiSelectorItem",p.Item=w},43242:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>m});var s=a(80263),r=a(53239),n=a(70800),l=a(51500),o=a(24771);function i(e){let{children:t,className:a,tag:r="div",style:n}=e;return(0,s.jsx)("".concat(r),{style:n,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}i.Title=function(e){let{className:t,level:a=1,children:r,style:n}=e;return(0,s.jsx)("h".concat(a),{style:n,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:r})},i.Text=function(e){let{className:t,children:a,style:r,type:n,disabled:l,mark:o,code:i,keyboard:d,underline:c,strikethrough:u,strong:x,small:m}=e;return i?(0,s.jsx)("code",{style:r,children:a}):o?(0,s.jsx)("mark",{style:r,children:a}):d?(0,s.jsx)("kbd",{style:r,children:a}):x?(0,s.jsx)("strong",{style:r,children:a}):(0,s.jsx)("span",{style:r,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:a})},i.Link=o.A;let d=(0,r.createContext)({type:"text"}),c=e=>{let{type:t}=e;return(0,s.jsx)(d.Provider,{value:{type:t},"data-sentry-element":"unknown","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},u=()=>{let e=(0,r.useContext)(d);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function x(e){let{children:t,className:a,ulClassName:r,style:n,type:l="text"}=e;return(0,s.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:a,style:n,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,s.jsx)(c,{type:l,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,s.jsx)("ul",{className:r,children:t})})})}x.Item=function(e){let{children:t,icon:a,active:r,rounded:o,onClick:i,doNotCloseOverlay:d=!1,showActiveBar:c=!1,style:x}=e,m=(0,n.A)("menu"),{type:f}=u(),h=[m.item.base];h.push(m.item.variants[f].base),r?h.push(m.item.variants[f].active):h.push(m.item.variants[f].normal);let p=[m.item.content.base];r?p.push(m.item.content.active):p.push(m.item.content.normal);let g=[m.item.icon.base];return r?g.push(m.item.icon.active):g.push(m.item.icon.normal),(0,s.jsxs)("li",{role:"menuitem",className:(0,l.cn)("outline-none",h),style:x,onClick:i,"aria-current":r?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[a&&(0,s.jsx)("div",{className:"".concat(g.join(" ")," min-w-fit"),children:a}),(0,s.jsx)("span",{className:p.join(" "),children:t})]})},x.Group=function(e){let{children:t,icon:a,title:r}=e,l=(0,n.A)("menu"),{type:o}=u();return(0,s.jsxs)("div",{className:[l.group.base,l.group.variants[o]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[a&&(0,s.jsx)("span",{className:l.group.icon,children:a}),(0,s.jsx)("span",{className:l.group.content,children:r}),t]})},x.Misc=function(e){let{children:t}=e;return(0,s.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,s.jsx)(i.Text,{"data-sentry-element":"unknown","data-sentry-source-file":"Menu.tsx",children:(0,s.jsx)("span",{children:t})})})};let m=x},45412:(e,t,a)=>{"use strict";a.d(t,{I:()=>n});var s=a(80263),r=a(40022);let n=e=>{let{form:t,hasChanges:a,handleReset:n,helper:l,disabled:o=!1,isSubmitting:i,submitText:d="Save"}=e,c=i||o||!a&&void 0!==a;return(0,s.jsxs)("div",{className:["flex w-full items-center gap-2",l?"justify-between":"justify-end"].join(" "),"data-sentry-component":"FormActions","data-sentry-source-file":"FormActions.tsx",children:[l&&(0,s.jsx)("span",{className:"text-sm text-foreground-lighter",children:l}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.$,{disabled:c,type:"default",htmlType:"reset",onClick:()=>n(),"data-sentry-element":"Button","data-sentry-source-file":"FormActions.tsx",children:"Cancel"}),(0,s.jsx)(r.$,{form:t,type:"primary",htmlType:"submit",disabled:c,loading:i,"data-sentry-element":"Button","data-sentry-source-file":"FormActions.tsx",children:d})]})]})}},66452:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var s=a(80263),r=a(24400),n=a(53239),l=a(90478),o=a(90226),i=a(97600),d=a(23385),c=a(5483),u=a(52361),x=a(63492),m=a(78098),f=a(60018);let h=(0,u.r)(e=>{let{title:t,children:a}=e,u=(0,r.useRouter)(),{ref:h}=(0,l.g)(),p=(0,c.KT)(),g=(0,d.a)();(0,n.useEffect)(()=>{x.pe||u.push("/project/default")},[u]);let y=u.pathname.includes("billing")?u.pathname.split("/")[5]:u.pathname.split("/")[4],{projectAuthAll:b,projectEdgeFunctionAll:j,projectStorageAll:v,billingInvoices:w}=(0,i.x)(["project_auth:all","project_edge_function:all","project_storage:all","billing:invoices"]),N=(0,f.M)(h,p,g,{auth:b,edgeFunctions:j,storage:v,invoices:w});return(0,s.jsx)(m.A,{isBlocking:!1,title:t||"Settings",product:"Settings",productMenu:(0,s.jsx)(o.l,{page:y,menu:N}),"data-sentry-element":"ProjectLayout","data-sentry-component":"SettingsLayout","data-sentry-source-file":"SettingsLayout.tsx",children:a})})},70777:(e,t,a)=>{"use strict";a.d(t,{c:()=>d});var s=a(32144),r=a(80251),n=a(73969),l=a(65172),o=a(47114);async function i(e){let{projectRef:t,dbSchema:a,maxRows:s,dbExtraSearchPath:r,dbPool:n}=e,o={db_schema:a,max_rows:s,db_extra_search_path:r};n&&(o.db_pool=n);let{data:i,error:d}=await (0,l.F6)("/platform/projects/{ref}/config/postgrest",{params:{path:{ref:t}},body:o});return d&&(0,l.H4)(d),i}let d=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,s.jE)();return(0,r.n)(e=>i(e),{async onSuccess(t,a,s){let{projectRef:r}=a;l.invalidateQueries(o.n.postgrest(r)),await (null==e?void 0:e(t,a,s))},async onError(e,a,s){void 0===t?n.oR.error("Failed to update Postgrest config: ".concat(e.message)):t(e,a,s)},...a})}},73047:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var s=a(80263),r=a(15601),n=a.n(r),l=a(43242),o=a(2119),i=a(40022);let d=e=>{let{name:t="",isActive:a,isExternal:r,icon:d,rightIcon:c,url:u="",target:x="_self",onClick:m,textClassName:f="",hoverText:h="",label:p}=e,g=(0,s.jsx)(l.Ay.Item,{icon:d,rounded:!0,active:a,onClick:m,children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,s.jsxs)("div",{title:h||("string"==typeof t?t:""),className:"flex items-center gap-2 truncate w-full "+f,children:[(0,s.jsxs)("span",{className:"truncate",children:[t," "]}),void 0!==p&&(0,s.jsx)(o.E,{variant:"warning",className:"py-0 px-1.5 capitalize",children:p})]}),c&&(0,s.jsx)("div",{children:c})]})});return u?r?(0,s.jsx)(i.$,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:d,children:(0,s.jsx)(n(),{href:u,target:"_blank",rel:"noreferrer",children:t})}):(0,s.jsx)(n(),{href:u,className:"block",target:x,children:g}):g}},90226:(e,t,a)=>{"use strict";a.d(t,{l:()=>o});var s=a(80263),r=a(43242),n=a(2119),l=a(73047);let o=e=>{let{page:t,menu:a}=e;return(0,s.jsx)("div",{className:"flex flex-col space-y-8 overflow-y-auto","data-sentry-component":"ProductMenu","data-sentry-source-file":"ProductMenu.tsx",children:(0,s.jsx)(r.Ay,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"ProductMenu.tsx",children:a.map((e,o)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"my-6 space-y-8",children:(0,s.jsxs)("div",{className:"mx-3",children:[(0,s.jsx)(r.Ay.Group,{title:e.title?(0,s.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,s.jsx)("span",{children:e.title}),e.isPreview&&(0,s.jsx)(n.E,{variant:"warning",children:"Not production ready"})]}):null}),(0,s.jsx)("div",{children:e.items.map(e=>{let a=e.pages?e.pages.includes(null!=t?t:""):t===e.key;return(0,s.jsx)(l.A,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:a,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),o!==a.length-1&&(0,s.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},91435:(e,t,a)=>{"use strict";a.d(t,{z:()=>c});var s=a(56947),r=a(65172),n=a(28140),l=a(5483),o=a(63492),i=a(89811);async function d(e,t,a){let{projectRef:s,connectionString:n}=e;if(!s)throw Error("projectRef is required");let l=new Headers(a);n&&l.set("x-connection-encrypted",n);let{data:o,error:d}=await (0,r.Jt)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":n,"x-pg-application-name":i.r},path:{ref:s}},headers:l,signal:t});return d&&(0,r.H4)(d),o}let c=function(e){let{projectRef:t,connectionString:a}=e,{enabled:r=!0,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=(0,l.KT)(),u=(null==c?void 0:c.status)===o.BU.ACTIVE_HEALTHY;return(0,s.I)(n.I.list(t),e=>{let{signal:s}=e;return d({projectRef:t,connectionString:a},s)},{enabled:r&&void 0!==t&&u,...i})}},92882:(e,t,a)=>{"use strict";a.d(t,{BS:()=>o,Dm:()=>c,HJ:()=>b,Rf:()=>g,Uw:()=>d,Vw:()=>w,Xr:()=>v,aw:()=>h,bV:()=>l,cJ:()=>m,dX:()=>u,eh:()=>i,fh:()=>j,gu:()=>x,sZ:()=>f,tn:()=>y,xp:()=>p});var s=a(80263),r=a(53239),n=a(51500);let l="mx-auto w-full max-w-[1200px]",o="px-4 @lg:px-6 @xl:px-12 @2xl:px-20 @3xl:px-24",i=(0,r.forwardRef)((e,t)=>{let{className:a,bottomPadding:r,size:l="default",...i}=e;return(0,s.jsx)("div",{ref:t,...i,className:(0,n.cn)("mx-auto w-full",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[l],o,r&&"pb-16",a)})}),d=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("header",{...r,ref:t,className:(0,n.cn)("w-full","flex-col gap-3 py-6",a)})}),c=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h1",{ref:t,...r,className:(0,n.cn)("text-2xl",a)})}),u=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,...r,className:(0,n.cn)("text-sm text-foreground-light",a)})}),x=(0,r.forwardRef)((e,t)=>{let{className:a,isFullWidth:r,topPadding:l,...o}=e;return(0,s.jsx)("div",{ref:t,...o,className:(0,n.cn)("flex flex-col first:pt-12 py-6",r?"w-full":"gap-3 lg:grid md:grid-cols-12",a)})}),m=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)("w-full h-px bg-border",a)})}),f=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,...r,className:(0,n.cn)("text-foreground text-xl",a)})}),h=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,...r,className:(0,n.cn)("text-sm text-foreground-light",a)})}),p=(0,r.forwardRef)((e,t)=>{let{className:a,children:r,title:l,...o}=e;return(0,s.jsxs)("div",{ref:t,...o,className:(0,n.cn)("col-span-4 xl:col-span-5 prose text-sm",a),children:[l&&(0,s.jsx)("h2",{children:l}),r]})}),g=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",a)})}),y=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)("flex flex-col gap-3 items-center",a)})}),b=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)("flex w-full items-center",a)})}),j=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)("flex flex-row gap-3",a)})}),v=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)("flex flex-col gap-3","min-w-[420px]",a)})}),w=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)(l,o,"my-8 flex flex-col gap-8",a)})});d.displayName="ScaffoldHeader",c.displayName="ScaffoldTitle",u.displayName="ScaffoldDescription",i.displayName="ScaffoldContainer",m.displayName="ScaffoldDivider",x.displayName="ScaffoldSection",v.displayName="ScaffoldColumn",p.displayName="ScaffoldSectionDetail",g.displayName="ScaffoldSectionContent",y.displayName="ScaffoldFilterAndContent",b.displayName="ScaffoldActionsContainer",j.displayName="ScaffoldActionsGroup",w.displayName="ScaffoldContainerLegacy",f.displayName="ScaffoldSectionTitle",h.displayName="ScaffoldSectionDescription"},96535:(e,t,a)=>{"use strict";a.d(t,{z:()=>i});var s=a(56947),r=a(65172),n=a(63492),l=a(47620);async function o(e,t){let{projectRef:a}=e;if(!a)throw Error("Project ref is required");let{data:s,error:n}=await (0,r.Jt)("/platform/projects/{ref}/load-balancers",{params:{path:{ref:a}},signal:t});return n&&(0,r.H4)(n),s}let i=function(e){let{projectRef:t}=e,{enabled:a=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.I)(l.p.loadBalancers(t),e=>{let{signal:a}=e;return o({projectRef:t},a)},{enabled:a&&void 0!==t&&n.pe,...r})}},99047:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ev});var s=a(80263),r=a(32144),n=a(87610),l=a(90478),o=a(98832),i=a(16265),d=a(43969),c=a(90437),u=a(82587),x=a(96535),m=a(6772),f=a(63492),h=a(54474),p=a(95708),g=a(2119),y=a(15601),b=a.n(y),j=a(40022),v=a(18687),w=a(90226),N=a(1266);let A=()=>{let{ref:e}=(0,l.g)(),t=[{title:"Project Settings",items:[{name:"General",key:"general",url:"#"},{name:"Compute and Disk",key:"compute-and-disk",url:"#"},{name:"Infrastructure",key:"infrastructure",url:"#"},{name:"Integrations",key:"integrations",url:"#"},{name:"API Keys",key:"api-keys",url:"#",label:"NEW"},{name:"JWT Keys",key:"jwt-keys",url:"#",label:"NEW"},{name:"Add Ons",key:"addons",url:"#"},{name:"Vault",key:"vault",url:"#",label:"Alpha",rightIcon:(0,s.jsx)(v.A,{strokeWidth:1,className:"h-4 w-4"})}]},{title:"Configuration",items:[{name:"Database",key:"database",url:"#"}]}];return(0,s.jsxs)("div",{className:"pb-36 pt-10 relative w-full flex flex-col xl:flex-row border xl:py-10 px-10 rounded-md overflow-hidden","data-sentry-component":"ApiKeysMoved","data-sentry-source-file":"ApiKeysMoved.tsx",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 z-[2]",children:[(0,s.jsx)("p",{className:"text-sm text-foreground",children:"API keys and JWT settings have moved"}),(0,s.jsx)("p",{className:"text-sm text-foreground-lighter mb-4",children:"They can now be found in their own respective pages."}),(0,s.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,s.jsx)(b(),{href:"/project/".concat(e,"/settings/api-keys"),"data-sentry-element":"Link","data-sentry-source-file":"ApiKeysMoved.tsx",children:(0,s.jsx)(j.$,{type:"default","data-sentry-element":"Button","data-sentry-source-file":"ApiKeysMoved.tsx",children:"Go to API Keys"})}),(0,s.jsx)(b(),{href:"/project/".concat(e,"/settings/api-keys"),"data-sentry-element":"Link","data-sentry-source-file":"ApiKeysMoved.tsx",children:(0,s.jsx)(j.$,{type:"default","data-sentry-element":"Button","data-sentry-source-file":"ApiKeysMoved.tsx",children:"Go to JWT Keys"})})]})]}),(0,s.jsxs)("div",{className:"absolute right-20 -top-[80px] w-fit scale-80 origin-top-right",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 bottom-0 left-0 bg-gradient-to-r from-transparent to-background-200/75 z-10"}),(0,s.jsxs)("div",{className:"bg-studio-sidebar border rounded-md overflow-hidden shadow-sm opacity-75 flex flex-row w-[280px]",children:[(0,s.jsx)("div",{className:"opacity-50",children:(0,s.jsx)(N.Bx,{"data-sentry-element":"Sidebar","data-sentry-source-file":"ApiKeysMoved.tsx"})}),(0,s.jsx)(w.l,{page:"api-keys",menu:t,"data-sentry-element":"ProductMenu","data-sentry-source-file":"ApiKeysMoved.tsx"})]})]})]})};var S=a(32981),P=a(60045),I=a(8848),C=a.n(I),k=a(36902),_=a(53239),M=a(87494),R=a(73969),E=a(39353),T=a(62136),D=a(45412),z=a(31695),H=a(49653),F=a(70777),L=a(91435),B=a(63604),q=a(75019),K=a(47452),V=a(13874),G=a(77635),O=a(1012),W=a(86254),U=a(55966),J=a(53555),$=a(93210),X=a(47142),Y=a(61395),Q=a(39412),Z=a(80903),ee=a(72259),et=a(88602),ea=a(14528),es=a(80251),er=a(47114),en=a(92403),el=a(65172),eo=a(15629);async function ei(e){let{projectRef:t,connectionString:a,existingPostgrestConfig:s}=e;await (0,eo.E)({projectRef:t,connectionString:a,sql:"\ncreate schema if not exists api;\ngrant usage on schema api to anon, authenticated;\n  ".trim()});let{db_extra_search_path:r,db_pool:n,db_schema:l,max_rows:o}=s,{error:i}=await (0,el.F6)("/platform/projects/{ref}/config/postgrest",{params:{path:{ref:t}},body:{db_pool:n,max_rows:o,db_extra_search_path:r,db_schema:"api, ".concat(l)}});return i&&(0,el.H4)(i),!0}let ed=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,r.jE)();return(0,es.n)(e=>ei(e),{async onSuccess(t,a,r){let{projectRef:n}=a;await Promise.all([s.invalidateQueries(en.c.schemas(n)),s.invalidateQueries(er.n.postgrest(n))]),await (null==e?void 0:e(t,a,r))},async onError(e,a,s){void 0===t?R.oR.error("Failed to create and expose API schema: ".concat(e.message)):t(e,a,s)},...a})};var ec=a(5483),eu=a(16838),ex=a(55501);let em=e=>{var t;let{visible:a,onClose:r}=e,n=(0,ec.KT)(),{data:l}=(0,B.w$)({projectRef:null==n?void 0:n.ref,connectionString:null==n?void 0:n.connectionString}),{data:o}=(0,H.y)({projectRef:null==n?void 0:n.ref}),i=(null!=l?l:[]).find(e=>"api"===e.name),d=null!=(t=null==o?void 0:o.db_schema.split(",").map(e=>e.trim()))?t:[],c=d.includes("api"),u=d.includes("public"),{mutate:x,isLoading:m}=ed({onSuccess:()=>{R.oR.success("Successfully created api schema and exposed via Data API")}}),{mutate:f,isLoading:h}=(0,F.c)({onSuccess:()=>{R.oR.success("Success removed public schema from exposed schemas")}});return(0,s.jsx)(eu.lG,{open:a,onOpenChange:r,"data-sentry-element":"Dialog","data-sentry-component":"HardenAPIModal","data-sentry-source-file":"HardenAPIModal.tsx",children:(0,s.jsxs)(eu.Cf,{size:"large","data-sentry-element":"DialogContent","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)(eu.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsx)(eu.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"HardenAPIModal.tsx",children:"Switch the default API schema"}),(0,s.jsxs)(eu.rr,{"data-sentry-element":"DialogDescription","data-sentry-source-file":"HardenAPIModal.tsx",children:["Expose a custom schema instead of the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema"]})]}),(0,s.jsx)(eu.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"HardenAPIModal.tsx"}),(0,s.jsxs)(eu.OO,{className:"text-sm text-foreground-light","data-sentry-element":"DialogSection","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)("p",{children:["By default, the ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema is used to generate API routes. In some cases, it's better to use a custom schema. This is important if you use tools that generate tables in the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema to"," ",(0,s.jsx)("span",{className:"text-brand",children:"prevent accidental exposure of data"}),"."]}),(0,s.jsx)(T.A,{abbrev:!1,className:"w-min mt-4",href:"https://supabase.com/docs/guides/database/hardening-data-api","data-sentry-element":"DocsButton","data-sentry-source-file":"HardenAPIModal.tsx"})]}),(0,s.jsx)(eu.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"HardenAPIModal.tsx"}),(0,s.jsxs)(U.Nt,{"data-sentry-element":"Collapsible_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)(U.R6,{className:"py-4 px-5 w-full flex items-center justify-between text-sm","data-sentry-element":"CollapsibleTrigger_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)("p",{children:["1. Create a custom ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"api"})," schema and expose it"]}),i&&c?(0,s.jsx)(Z.A,{size:16,className:"text-brand"}):(0,s.jsx)(ee.A,{size:16,className:"transition data-open-parent:rotate-180 data-closed-parent:rotate-0"})]}),(0,s.jsxs)(U.Ke,{className:"text-sm text-foreground-light flex flex-col gap-y-4","data-sentry-element":"CollapsibleContent_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)("p",{className:"mx-5",children:["Click the button below to create a new schema named"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"api"})," and grant the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"anon"})," and"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"authenticated"})," roles usage privileges on this schema. This schema will thereafter also be exposed to the Data API."]}),(0,s.jsx)("div",{className:"px-5",children:(0,s.jsx)(ea.A,{title:"How is the schema created?",description:(0,s.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,s.jsxs)("p",{children:["The following query will be run to create the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"api"})," schema , as well as to grant the necessary privileges to the respective roles"]}),(0,s.jsx)(ex.N,{language:"sql",className:"p-1 language-bash prose dark:prose-dark max-w-[68.3ch]",children:"create schema if not exists api;\ngrant usage on schema api to anon, authenticated;"})]}),"data-sentry-element":"InformationBox","data-sentry-source-file":"HardenAPIModal.tsx"})}),(0,s.jsx)(et.G,{type:"primary",className:"w-min mx-5",onClick:()=>void 0===n?console.error("Project is required"):void 0===o?console.error("Postgrest config is required"):void x({projectRef:null==n?void 0:n.ref,connectionString:null==n?void 0:n.connectionString,existingPostgrestConfig:{max_rows:o.max_rows,db_pool:o.db_pool,db_schema:o.db_schema,db_extra_search_path:null==o?void 0:o.db_extra_search_path}}),disabled:i&&c,loading:m,tooltip:{content:{side:"right",text:i&&c?"Schema has already been created and exposed":void 0}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"HardenAPIModal.tsx",children:"Create and expose schema to Data API"}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-4 px-5 pb-4",children:[(0,s.jsxs)("p",{children:["Under these new settings, the ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"anon"})," ","and ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"authenticated"})," roles can execute functions defined in the ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"api"})," ","schema, but they have no automatic permissions on any tables. On a table-by-table basis, you can grant them permissions by running the following command:"]}),(0,s.jsx)(ex.N,{language:"sql",className:"p-1 language-bash prose dark:prose-dark max-w-[68.3ch]","data-sentry-element":"CodeBlock","data-sentry-source-file":"HardenAPIModal.tsx",children:"grant select on table api.<your_table> to anon;\ngrant select, insert, update, delete on table api.<your_table> to authenticated;"})]})]})]}),(0,s.jsx)(eu.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"HardenAPIModal.tsx"}),(0,s.jsxs)(U.Nt,{"data-sentry-element":"Collapsible_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)(U.R6,{className:"py-4 px-5 w-full flex items-center justify-between text-sm","data-sentry-element":"CollapsibleTrigger_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)("p",{children:["2. Remove the ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema from the exposed schemas"]}),u?(0,s.jsx)(ee.A,{size:16,className:"transition data-open-parent:rotate-180 data-closed-parent:rotate-0"}):(0,s.jsx)(Z.A,{size:16,className:"text-brand"})]}),(0,s.jsx)(U.Ke,{className:"text-sm text-foreground-light","data-sentry-element":"CollapsibleContent_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:(0,s.jsxs)("div",{className:"px-5 pb-4 flex flex-col gap-y-4",children:[(0,s.jsxs)(O.Fc,{variant:"warning","data-sentry-element":"Alert_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsx)(W.id,{"data-sentry-element":"WarningIcon","data-sentry-source-file":"HardenAPIModal.tsx"}),(0,s.jsxs)(O.XL,{className:"text-foreground","data-sentry-element":"AlertTitle_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:["Ensure that your app is no longer using the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema"]}),(0,s.jsxs)(O.TN,{"data-sentry-element":"AlertDescription_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:["The ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema will not be accessible via the API once its not exposed. You should be using the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"api"})," schema instead."]})]}),(0,s.jsxs)("p",{children:["Click the button below to remove the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema from both Exposed schemas and Extra search path in your API configuration."]}),(0,s.jsx)(et.G,{type:"primary",className:"w-min",disabled:!u,loading:h,tooltip:{content:{side:"right",text:u?void 0:"Public schema no longer exposed"}},onClick:()=>{if(void 0===n)return console.error("Project is required");if(void 0===o)return console.error("Postgrest config is required");let e=o.db_extra_search_path.split(",").map(e=>e.trim()).filter(e=>"public"!==e).join(", "),t=o.db_schema.split(",").map(e=>e.trim()).filter(e=>"public"!==e).join(", ");f({projectRef:n.ref,maxRows:o.max_rows,dbPool:o.db_pool,dbSchema:t,dbExtraSearchPath:e})},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"HardenAPIModal.tsx",children:"Remove public schema from exposed schemas"})]})})]})]})})},ef=E.z.object({dbSchema:E.z.array(E.z.string()),dbExtraSearchPath:E.z.string(),maxRows:E.z.number().max(1e6,"Can't be more than 1,000,000"),dbPool:E.z.number().min(0,"Must be more than 0").max(1e3,"Can't be more than 1000").optional().nullable(),enableDataApi:E.z.boolean()}).refine(e=>!e.enableDataApi||0!==e.dbSchema.length,{message:"Must have at least one schema if Data API is enabled",path:["dbSchema"]}),eh=()=>{var e,t;let{ref:a}=(0,l.g)(),{project:r}=(0,o.Om)(),[n,i]=(0,_.useState)(!1),{data:d,isError:c}=(0,H.y)({projectRef:a}),{data:u}=(0,L.z)({projectRef:null==r?void 0:r.ref,connectionString:null==r?void 0:r.connectionString}),{data:x,isLoading:m}=(0,B.w$)({projectRef:null==r?void 0:r.ref,connectionString:null==r?void 0:r.connectionString}),{mutate:f,isLoading:h}=(0,F.c)({onSuccess:()=>{R.oR.success("Successfully saved settings")}}),p="project-postgres-config",g=["auth","pgbouncer","hooks","extensions"],y=(0,q.SE)(P.aG.UPDATE,"custom_config_postgrest"),v=(null==(e=(null!=u?u:[]).find(e=>"pg_graphql"===e.name))?void 0:e.installed_version)!==null,w=(null==d?void 0:d.db_schema)?null==d?void 0:d.db_schema.replace(/ /g,"").split(","):[],N={dbSchema:w,maxRows:null==d?void 0:d.max_rows,dbExtraSearchPath:null==d?void 0:d.db_extra_search_path,dbPool:null==d?void 0:d.db_pool},A=(0,M.mN)({resolver:(0,S.u)(ef),mode:"onChange",defaultValues:N}),I=null!=(t=null==x?void 0:x.filter(e=>{if(0>C()(g,e.name))return e}).map(e=>({id:e.id,value:e.name,name:e.name,disabled:!1})))?t:[];function E(){let e=null!=d&&!!d.db_schema;A.reset({...N,enableDataApi:e})}let Z=async e=>{if(!a)return console.error("Project ref is required");f({projectRef:a,dbSchema:e.dbSchema.join(", "),maxRows:e.maxRows,dbExtraSearchPath:e.dbExtraSearchPath,dbPool:e.dbPool?e.dbPool:null})};(0,_.useEffect)(()=>{d&&E()},[d]);let ee=A.getValues("enableDataApi");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(K.lV,{...A,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"PostgrestConfig.tsx",children:(0,s.jsx)("form",{id:p,onSubmit:A.handleSubmit(Z),children:(0,s.jsxs)(z.ge,{"data-sentry-element":"FormPanelContainer","data-sentry-source-file":"PostgrestConfig.tsx",children:[(0,s.jsxs)(z.gI,{className:"flex items-center justify-between","data-sentry-element":"FormPanelHeader","data-sentry-source-file":"PostgrestConfig.tsx",children:[(0,s.jsx)("span",{children:"Data API Settings"}),(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,s.jsx)(T.A,{href:"https://supabase.com/docs/guides/database/connecting-to-postgres#data-apis","data-sentry-element":"DocsButton","data-sentry-source-file":"PostgrestConfig.tsx"}),(0,s.jsx)(j.$,{type:"default",icon:(0,s.jsx)(k.A,{}),onClick:()=>i(!0),"data-sentry-element":"Button","data-sentry-source-file":"PostgrestConfig.tsx",children:"Harden Data API"})]})]}),(0,s.jsxs)(z.YX,{"data-sentry-element":"FormPanelContent","data-sentry-source-file":"PostgrestConfig.tsx",children:[c?(0,s.jsx)(X.Z,{type:"destructive",title:"Failed to retrieve API settings"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(K.zB,{control:A.control,name:"enableDataApi",render:e=>{let{field:t}=e;return(0,s.jsxs)(K.eI,{className:"w-full",children:[(0,s.jsx)(Y.M,{className:"w-full px-8 py-8",layout:"flex",label:"Enable Data API",description:"When enabled you will be able to use any Supabase client library and PostgREST endpoints with any schema configured below.",children:(0,s.jsx)(K.MJ,{children:(0,s.jsx)(V.d,{size:"large",disabled:!y,checked:t.value,onCheckedChange:e=>{t.onChange(e),e?(A.setValue("enableDataApi",!0),A.setValue("dbSchema",w)):(A.setValue("enableDataApi",!1),A.setValue("dbSchema",[]))}})})}),!t.value&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(G.w,{}),(0,s.jsxs)(O.Fc,{variant:"warning",className:"mb-0 border-none rounded-none",children:[(0,s.jsx)(W.id,{className:"!left-[2rem]"}),(0,s.jsx)(O.XL,{className:"!pl-[3.5rem] !left-[6rem]",children:"No schemas can be queried"}),(0,s.jsxs)(O.TN,{className:"!pl-[3.5rem]",children:[(0,s.jsx)("p",{children:"With this setting disabled, you will not be able to query any schemas via the Data API."}),(0,s.jsxs)("p",{children:["You will see errors from the Postgrest endpoint",(0,s.jsx)("code",{className:"text-xs",children:"/rest/v1/"}),"."]})]})]})]})]})}}),(0,s.jsx)(U.Nt,{open:A.getValues("enableDataApi"),children:(0,s.jsxs)(U.Ke,{className:"border-t divide-y transition-all data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down",children:[(0,s.jsx)(K.zB,{control:A.control,name:"dbSchema",render:e=>{let{field:t}=e;return(0,s.jsx)(K.eI,{className:"w-full",children:(0,s.jsxs)(Y.M,{label:"Exposed schemas",description:"The schemas to expose in your API. Tables, views and stored procedures in these schemas will get API endpoints.",layout:"horizontal",className:"px-8 py-8",children:[m?(0,s.jsx)("div",{className:"col-span-12 flex flex-col gap-2 lg:col-span-7",children:(0,s.jsx)(J.E,{className:"w-full h-[38px]"})}):(0,s.jsxs)(Q.xf,{onValuesChange:t.onChange,values:t.value,size:"small",disabled:!y||!ee,children:[(0,s.jsx)(Q.hw,{mode:"inline-combobox",label:"Select schemas for Data API...",badgeLimit:"wrap",showIcon:!1,deletableBadge:!0}),(0,s.jsx)(Q.sD,{children:(0,s.jsx)(Q.DG,{children:I.length<=0?(0,s.jsx)(Q.Oe,{value:"no",children:"no"},"empty"):(0,s.jsx)(s.Fragment,{children:I.map(e=>(0,s.jsx)(Q.Oe,{value:e.name,children:e.name},e.id+"-"+e.name))})})})]}),!t.value.includes("public")&&t.value.length>0&&(0,s.jsx)(X.Z,{type:"default",title:"The public schema for this project is not exposed",className:"mt-2",description:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["You will not be able to query tables and views in the"," ",(0,s.jsx)("code",{children:"public"})," schema via supabase-js or HTTP clients."]}),v&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["Tables in the ",(0,s.jsx)("code",{className:"text-xs",children:"public"})," ","schema are still exposed over our GraphQL endpoints."]}),(0,s.jsx)(j.$,{asChild:!0,type:"default",children:(0,s.jsx)(b(),{href:"/project/".concat(a,"/database/extensions"),children:"Disable the pg_graphql extension"})})]})]})})]})})}}),(0,s.jsx)(K.zB,{control:A.control,name:"dbExtraSearchPath",render:e=>{let{field:t}=e;return(0,s.jsx)(K.eI,{className:"w-full",children:(0,s.jsx)(Y.M,{className:"w-full px-8 py-8",layout:"horizontal",label:"Extra search path",description:"Extra schemas to add to the search path of every request. Multiple schemas must be comma-separated.",children:(0,s.jsx)(K.MJ,{children:(0,s.jsx)($.p,{size:"small",disabled:!y||!ee,...t})})})})}}),(0,s.jsx)(K.zB,{control:A.control,name:"maxRows",render:e=>{let{field:t}=e;return(0,s.jsx)(K.eI,{className:"w-full",children:(0,s.jsx)(Y.M,{className:"w-full px-8 py-8",layout:"horizontal",label:"Max rows",description:"The maximum number of rows returned from a view, table, or stored procedure. Limits payload size for accidental or malicious requests.",children:(0,s.jsx)(K.MJ,{children:(0,s.jsx)($.p,{size:"small",disabled:!y||!ee,...t,type:"number",...A.register("maxRows",{valueAsNumber:!0})})})})})}}),(0,s.jsx)(K.zB,{control:A.control,name:"dbPool",render:e=>{let{field:t}=e;return(0,s.jsx)(K.eI,{className:"w-full",children:(0,s.jsx)(Y.M,{className:"w-full px-8 py-8",layout:"horizontal",label:"Pool size",description:"Number of maximum connections to keep open in the Data API server's database pool. Unset to let it be configured automatically based on compute size.",children:(0,s.jsx)(K.MJ,{children:(0,s.jsx)($.p,{size:"small",disabled:!y||!ee,...t,type:"number",placeholder:"Configured automatically based on compute size",onChange:e=>t.onChange(""===e.target.value?null:Number(e.target.value)),value:null===t.value?"":t.value})})})})}})]})})]}),(0,s.jsx)(z._4,{className:"flex px-8 py-4","data-sentry-element":"FormPanelFooter","data-sentry-source-file":"PostgrestConfig.tsx",children:(0,s.jsx)(D.I,{form:p,isSubmitting:h,hasChanges:A.formState.isDirty,handleReset:E,disabled:!y,helper:y?void 0:"You need additional permissions to update your project's API settings","data-sentry-element":"FormActions","data-sentry-source-file":"PostgrestConfig.tsx"})})]})]})})}),(0,s.jsx)(em,{visible:n,onClose:()=>i(!1),"data-sentry-element":"HardenAPIModal","data-sentry-source-file":"PostgrestConfig.tsx"})]})},ep=()=>{var e,t;(0,r.jE)();let{project:a,isLoading:y}=(0,o.Om)(),{ref:b,source:j}=(0,l.g)(),v=(0,h.RE)(),{data:w}=(0,u.A)({projectRef:b}),{data:N,isError:S}=(0,m.Vh)({projectRef:b}),{data:P}=(0,x.z)({projectRef:b}),I=(null==w||null==(e=w.customDomain)?void 0:e.status)==="active",C=null==N?void 0:N.find(e=>e.identifier===v.selectedDatabaseId),k="load-balancer"===v.selectedDatabaseId,_=(null==C?void 0:C.identifier)!==b,M=I&&v.selectedDatabaseId===b?"https://".concat(w.customDomain.hostname):k?null!=(t=null==P?void 0:P[0].endpoint)?t:"":null==C?void 0:C.restUrl;return(0,s.jsx)("div",{"data-sentry-component":"ServiceList","data-sentry-source-file":"ServiceList.tsx",children:y?(0,s.jsx)(c.y,{}):(null==a?void 0:a.status)!==f.BU.ACTIVE_HEALTHY?(0,s.jsxs)("div",{className:"flex items-center justify-center rounded border border-overlay bg-surface-100 p-8",children:[(0,s.jsx)(n.A,{size:16}),(0,s.jsx)("p",{className:"text-sm text-foreground-light ml-2",children:"API settings are unavailable as the project is not active"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("section",{children:(0,s.jsx)(d.A,{title:(0,s.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,s.jsx)("h5",{className:"mb-0",children:"Project URL"}),(0,s.jsx)(i.A,{additionalOptions:(null!=P?P:[]).length>0?[{id:"load-balancer",name:"API Load Balancer"}]:[]})]}),children:(0,s.jsx)(d.A.Content,{children:S?(0,s.jsxs)("div",{className:"flex items-center justify-center py-4 space-x-2",children:[(0,s.jsx)(n.A,{size:16}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Failed to retrieve project URL"})]}):(0,s.jsx)(p.A,{copy:!0,label:I?(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("p",{children:"URL"}),(0,s.jsx)(g.E,{children:"Custom domain active"})]}):"URL",readOnly:!0,disabled:!0,className:"input-mono",value:M,descriptionText:k?"RESTful endpoint for querying and managing your databases through your load balancer":_?"RESTful endpoint for querying your read replica":"RESTful endpoint for querying and managing your database",layout:"horizontal"})})})}),(0,s.jsx)("section",{className:"mb-8",children:(0,s.jsx)(A,{})}),(0,s.jsx)("section",{id:"postgrest-config",children:(0,s.jsx)(eh,{})})]})})};var eg=a(62146),ey=a(66452),eb=a(92882);let ej=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eb.eh,{id:"billing-page-top","data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"api.tsx",children:(0,s.jsx)(eb.Uw,{"data-sentry-element":"ScaffoldHeader","data-sentry-source-file":"api.tsx",children:(0,s.jsx)(eb.Dm,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"api.tsx",children:"API Settings"})})}),(0,s.jsx)(eb.eh,{bottomPadding:!0,"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"api.tsx",children:(0,s.jsx)(ep,{"data-sentry-element":"ServiceList","data-sentry-source-file":"api.tsx"})})]});ej.getLayout=e=>(0,s.jsx)(eg.A,{children:(0,s.jsx)(ey.A,{title:"API Settings",children:e})});let ev=ej}},e=>{var t=t=>e(e.s=t);e.O(0,[89,726,4280,3730,2981,6110,386,7661,5599,8445,4849,3019,1680,7654,8274,6,3634,5007,4017,890,9014,7795,4444,7182,1715,8821,1099,2146,5756,8098,6593,636,8792],()=>t(34859)),_N_E=e.O()}]);