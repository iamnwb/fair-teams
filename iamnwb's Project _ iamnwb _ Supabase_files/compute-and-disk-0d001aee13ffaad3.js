!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="eba69deb-5435-4529-9d3f-d3ccbc4d55b0",e._sentryDebugIdIdentifier="sentry-dbid-eba69deb-5435-4529-9d3f-d3ccbc4d55b0")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4802,4986],{3434:(e,t,a)=>{"use strict";a.d(t,{A0:()=>l,BF:()=>o,Gg:()=>d,Hj:()=>c,XI:()=>n,nA:()=>m,nd:()=>u,r6:()=>p});var i=a(80263),s=a(53239),r=a(51500);let n=s.forwardRef((e,t)=>{let{className:a,containerProps:s,...n}=e;return(0,i.jsx)("div",{className:(0,r.cn)("w-full overflow-auto"),...s,children:(0,i.jsx)("table",{ref:t,className:(0,r.cn)("w-full caption-bottom text-sm",a),...n})})});n.displayName="Table";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("thead",{ref:t,className:(0,r.cn)("[&_tr]:border-b",a),...s})});l.displayName="TableHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("tbody",{ref:t,className:(0,r.cn)("[&_tr:last-child]:border-0",a),...s})});o.displayName="TableBody";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("tfoot",{ref:t,className:(0,r.cn)("bg-primary font-medium text-primary-foreground",a),...s})});d.displayName="TableFooter";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("tr",{ref:t,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});c.displayName="TableRow";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("th",{ref:t,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-foreground-muted [&:has([role=checkbox])]:pr-0",a),...s})});u.displayName="TableHead";let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("td",{ref:t,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});m.displayName="TableCell";let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("caption",{ref:t,className:(0,r.cn)("mt-4 text-sm text-foreground-muted",a),...s})});p.displayName="TableCaption"},14450:(e,t,a)=>{"use strict";a.d(t,{$6:()=>g,$C:()=>d,CQ:()=>u,Fu:()=>m,HE:()=>c,QV:()=>j,T2:()=>h,Uk:()=>n,WC:()=>r,ZV:()=>v,a6:()=>x,it:()=>p,ku:()=>y,ou:()=>o,t5:()=>l,u1:()=>f});var i=a(63492),s=a(28738);let r=e=>{var t,a,i,r;let{planId:n,oldSize:l,oldStorageType:o,newSize:d,newStorageType:c,numReplicas:u=0}=e,m=null!=(i=null==(t=s.zN[o])?void 0:t.storage)?i:0,p=null!=(r=null==(a=s.zN[c])?void 0:a.storage)?r:0,{includedDiskGB:x}=null===s.Jh||void 0===s.Jh?void 0:s.Jh[n],h=Math.max(l-x[o],0)*m,f=Math.max(d-x[c],0)*p;return{oldPrice:(h+1.25*l*m*u).toFixed(2),newPrice:(f+1.25*d*p*u).toFixed(2)}},n=e=>{var t,a,i,s;let{availableOptions:r,oldComputeSize:n,newComputeSize:l,plan:o}=e,d=n;"free"!==o&&"ci_nano"===n&&(d="ci_micro");let c=null!=(i=null==r||null==(t=r.find(e=>e.identifier===d))?void 0:t.price)?i:0,u=null!=(s=null==r||null==(a=r.find(e=>e.identifier===l))?void 0:a.price)?s:0;return{oldPrice:(720*c).toFixed(2),newPrice:(720*u).toFixed(2)}},l=e=>{var t,a,i,r,n,l,o,d;let{oldStorageType:c,oldProvisionedIOPS:u,newStorageType:m,newProvisionedIOPS:p,numReplicas:x=0}=e;if(m===s.y6.GP3){let e=Math.max(0,u-s.No[s.y6.GP3].includedIops),n=Math.max(0,p-s.No[s.y6.GP3].includedIops),l=e*(null!=(i=null==(t=s.zN[c])?void 0:t.iops)?i:0),o=n*(null!=(r=null==(a=s.zN[m])?void 0:a.iops)?r:0);return{oldPrice:(l*(1+x)).toFixed(2),newPrice:(o*(1+x)).toFixed(2)}}{let e="gp3"===c?(u-s.No[c].includedIops)*s.zN[c].iops:u*(null!=(o=null==(n=s.zN[c])?void 0:n.iops)?o:0),t=p*(null!=(d=null==(l=s.zN[m])?void 0:l.iops)?d:0);return{oldPrice:(e*(1+x)).toFixed(2),newPrice:(t*(1+x)).toFixed(2)}}},o=e=>{let{storageType:t,newThroughput:a,oldThroughput:i,numReplicas:r=0}=e;if(t===s.y6.GP3&&a){let e=Math.max(0,i-s.No[s.y6.GP3].includedThroughput),t=Math.max(0,a-s.No[s.y6.GP3].includedThroughput),n=e*s.zN[s.y6.GP3].throughput,l=t*s.zN[s.y6.GP3].throughput;return{oldPrice:(n*(1+r)).toFixed(2),newPrice:(l*(1+r)).toFixed(2)}}return{oldPrice:"0.00",newPrice:"0.00"}};function d(e,t){var a,s;let r=null!=(s=null==(a=e.find(e=>"compute_instance"===e.type))?void 0:a.variants.filter(e=>{if(!t)return!0;let a=e.meta;return!a.supported_cloud_providers||a.supported_cloud_providers.includes(t)}))?s:[];return r.unshift({identifier:"ci_nano",name:"Nano",price_description:"$0/hour (~$0/month)",price:0,price_interval:"hourly",price_type:"usage",meta:{cpu_cores:i.kC.cpu_cores,cpu_dedicated:i.kC.cpu_dedicated,memory_gb:i.kC.memory_gb,baseline_disk_io_mbs:i.kC.baseline_disk_io_mbs,max_disk_io_mbs:i.kC.max_disk_io_mbs,connections_direct:i.kC.connections_direct,connections_pooler:i.kC.connections_pooler}}),r}let c=e=>Math.min(3e3*e,16e3),u=e=>Math.max(1,Math.ceil(e/500)),m=e=>Math.min(500*e,256e3),p=e=>Math.max(4,Math.ceil(e/1e3)),x=e=>Math.max(125,Math.ceil(e/.256)),h=e=>s.QL[e]||0,f=e=>{let t=Object.entries(s.QL).sort((e,t)=>e[1]-t[1]);for(let[a,i]of t)if(e<=i)return a;return t[t.length-1][0]},g=e=>({pico:"ci_pico",nano:"ci_nano",micro:"ci_micro",small:"ci_small",medium:"ci_medium",large:"ci_large",xlarge:"ci_xlarge","2xlarge":"ci_2xlarge","4xlarge":"ci_4xlarge","8xlarge":"ci_8xlarge","12xlarge":"ci_12xlarge","16xlarge":"ci_16xlarge","24xlarge":"ci_24xlarge","24xlarge_optimized_memory":"ci_24xlarge_optimized_memory","24xlarge_optimized_cpu":"ci_24xlarge_optimized_cpu","24xlarge_high_memory":"ci_24xlarge_high_memory","48xlarge":"ci_48xlarge","48xlarge_optimized_memory":"ci_48xlarge_optimized_memory","48xlarge_optimized_cpu":"ci_48xlarge_optimized_cpu","48xlarge_high_memory":"ci_48xlarge_high_memory"})[null!=e?e:"nano"],y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ci_nano";return({ci_nano:"Nano",ci_micro:"Micro",ci_small:"Small",ci_medium:"Medium",ci_large:"Large",ci_xlarge:"XL",ci_2xlarge:"2XL",ci_4xlarge:"4XL",ci_8xlarge:"8XL",ci_12xlarge:"12XL",ci_16xlarge:"16XL",ci_24xlarge:"24XL",ci_24xlarge_optimized_memory:"24XL - Optimized Memory",ci_24xlarge_optimized_cpu:"24XL - Optimized CPU",ci_24xlarge_high_memory:"24XL - High Memory",ci_48xlarge:"48XL",ci_48xlarge_optimized_memory:"48XL - Optimized Memory",ci_48xlarge_optimized_cpu:"48XL - Optimized CPU",ci_48xlarge_high_memory:"48XL - High Memory"})[e]},v=e=>e.toLocaleString("en-US"),j=(e,t)=>"free"!==e&&"nano"===t},24771:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var i=a(80263);a(53239);let s=function(e){let{children:t,target:a="_blank",href:s,className:r,onClick:n,style:l}=e;return(0,i.jsx)("a",{onClick:n,href:s,target:a,rel:"noopener noreferrer",style:l,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})}},28738:(e,t,a)=>{"use strict";a.d(t,{EH:()=>m,JM:()=>c,Jh:()=>o,No:()=>l,QL:()=>d,SZ:()=>r,eQ:()=>u,nU:()=>i,y6:()=>s,zN:()=>n});let i=.9;var s=function(e){return e.GP3="gp3",e.IO2="io2",e}({});let r={growthPercent:50,minIncrementSize:4,maxSizeGb:6e4},n={gp3:{storage:.125,iops:.024,throughput:.095},io2:{storage:.195,iops:.119}},l={gp3:{minStorage:1,maxStorage:16384,minIops:3e3,maxIops:16e3,minThroughput:125,maxThroughput:1e3,includedIops:3e3,includedThroughput:125},io2:{minStorage:4,maxStorage:61440,minIops:1500,maxIops:256e3,includedIops:0,includedThroughput:0}},o={free:{includedDiskGB:{gp3:1,io2:0}},pro:{includedDiskGB:{gp3:8,io2:0}},team:{includedDiskGB:{gp3:8,io2:0}},enterprise:{includedDiskGB:{gp3:8,io2:0}}},d={ci_nano:250,ci_micro:500,ci_small:1e3,ci_medium:2e3,ci_large:3600,ci_xlarge:6e3,ci_2xlarge:12e3,ci_4xlarge:2e4,ci_8xlarge:4e4,ci_12xlarge:5e4,ci_16xlarge:8e4,ci_24xlarge:12e4,ci_24xlarge_optimized_cpu:12e4,ci_24xlarge_optimized_memory:12e4,ci_24xlarge_high_memory:12e4,ci_48xlarge:24e4,ci_48xlarge_optimized_cpu:24e4,ci_48xlarge_optimized_memory:24e4,ci_48xlarge_high_memory:24e4},c=["ci_nano","ci_micro","ci_small","ci_medium"],u=["ci_nano","ci_micro","ci_small","ci_medium"],m=[{type:"gp3",name:"General Purpose SSD",description:"Balance between price and performance"},{type:"io2",name:"High Performance SSD",description:"High performance for mission critical applications"}]},30169:(e,t,a)=>{"use strict";a.d(t,{R:()=>n});var i=a(80263),s=a(2119),r=a(51500);function n(e){let{infraComputeSize:t,className:a,...n}=e,l=(null==t?void 0:t.toLocaleLowerCase())==="micro"||(null==t?void 0:t.toLocaleLowerCase())==="nano";return(0,i.jsx)(s.E,{className:(0,r.cn)("rounded-md text-center flex justify-center font-mono uppercase","group-data-[state=open]:bg-opacity-20 group-data-[state=open]:ring-2 group-data-[state=open]:ring-opacity-20","transition-all",l?"group-data-[state=open]:ring-foreground-muted bg-opacity-50 group-data-[state=open]:bg-opacity-75":"group-data-[state=open]:ring-brand",a),variant:t?l?"default":"brand":"default",...n,"data-sentry-element":"Badge","data-sentry-component":"ComputeBadge","data-sentry-source-file":"index.tsx",children:t})}},43242:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>p});var i=a(80263),s=a(53239),r=a(70800),n=a(51500),l=a(24771);function o(e){let{children:t,className:a,tag:s="div",style:r}=e;return(0,i.jsx)("".concat(s),{style:r,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}o.Title=function(e){let{className:t,level:a=1,children:s,style:r}=e;return(0,i.jsx)("h".concat(a),{style:r,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:s})},o.Text=function(e){let{className:t,children:a,style:s,type:r,disabled:n,mark:l,code:o,keyboard:d,underline:c,strikethrough:u,strong:m,small:p}=e;return o?(0,i.jsx)("code",{style:s,children:a}):l?(0,i.jsx)("mark",{style:s,children:a}):d?(0,i.jsx)("kbd",{style:s,children:a}):m?(0,i.jsx)("strong",{style:s,children:a}):(0,i.jsx)("span",{style:s,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:a})},o.Link=l.A;let d=(0,s.createContext)({type:"text"}),c=e=>{let{type:t}=e;return(0,i.jsx)(d.Provider,{value:{type:t},"data-sentry-element":"unknown","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},u=()=>{let e=(0,s.useContext)(d);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function m(e){let{children:t,className:a,ulClassName:s,style:r,type:n="text"}=e;return(0,i.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:a,style:r,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,i.jsx)(c,{type:n,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,i.jsx)("ul",{className:s,children:t})})})}m.Item=function(e){let{children:t,icon:a,active:s,rounded:l,onClick:o,doNotCloseOverlay:d=!1,showActiveBar:c=!1,style:m}=e,p=(0,r.A)("menu"),{type:x}=u(),h=[p.item.base];h.push(p.item.variants[x].base),s?h.push(p.item.variants[x].active):h.push(p.item.variants[x].normal);let f=[p.item.content.base];s?f.push(p.item.content.active):f.push(p.item.content.normal);let g=[p.item.icon.base];return s?g.push(p.item.icon.active):g.push(p.item.icon.normal),(0,i.jsxs)("li",{role:"menuitem",className:(0,n.cn)("outline-none",h),style:m,onClick:o,"aria-current":s?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[a&&(0,i.jsx)("div",{className:"".concat(g.join(" ")," min-w-fit"),children:a}),(0,i.jsx)("span",{className:f.join(" "),children:t})]})},m.Group=function(e){let{children:t,icon:a,title:s}=e,n=(0,r.A)("menu"),{type:l}=u();return(0,i.jsxs)("div",{className:[n.group.base,n.group.variants[l]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[a&&(0,i.jsx)("span",{className:n.group.icon,children:a}),(0,i.jsx)("span",{className:n.group.content,children:s}),t]})},m.Misc=function(e){let{children:t}=e;return(0,i.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,i.jsx)(o.Text,{"data-sentry-element":"unknown","data-sentry-source-file":"Menu.tsx",children:(0,i.jsx)("span",{children:t})})})};let p=m},47607:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/settings/compute-and-disk",function(){return a(62984)}])},49972:(e,t,a)=>{"use strict";a.d(t,{F:()=>d});var i=a(32144),s=a(80251),r=a(73969),n=a(65172),l=a(7124);async function o(e){let{projectRef:t,variant:a,type:i}=e;if(!t)throw Error("projectRef is required");if(!a)throw Error("variant is required");if(!i)throw Error("type is required");let{data:s,error:r}=await (0,n.bE)("/platform/projects/{ref}/billing/addons",{params:{path:{ref:t}},body:{addon_type:i,addon_variant:a}});return r&&(0,n.H4)(r),s}let d=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,i.jE)();return(0,s.n)(e=>o(e),{async onSuccess(t,a,i){let{projectRef:s}=a;await n.invalidateQueries(l.s.addons(s)),await (null==e?void 0:e(t,a,i))},async onError(e,a,i){void 0===t?r.oR.error("Failed to update addon: ".concat(e.message)):t(e,a,i)},...a})}},60954:(e,t,a)=>{"use strict";a.d(t,{Gc:()=>u,Zj:()=>m});var i=a(56947),s=a(53434),r=a.n(s),n=a(53239),l=a(65172),o=a(93453),d=a(47114);async function c(e,t){let{projectRef:a}=e;if(!a)throw Error("Project ref is required");let{data:i,error:s}=await (0,l.Jt)("/platform/projects/{ref}/disk",{params:{path:{ref:a}},signal:t});return s&&(0,l.H4)(s),i}let u=function(e){let{projectRef:t}=e,{enabled:a=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.I)(d.n.diskAttributes(t),e=>{let{signal:a}=e;return c({projectRef:t},a)},{enabled:a&&void 0!==t,...s})},m=e=>{var t;let{projectRef:a,enabled:i=!0}=e,{data:s,isLoading:l,isError:d,isSuccess:c,error:m}=u({projectRef:a},{enabled:i}),p=r()(null!=(t=null==s?void 0:s.last_modified_at)?t:"").utc(),x=Math.max(0,r()().utc().diff(r()(p).utc(),"second")),h=(0,n.useMemo)(()=>void 0===p||o.Xz-x<0?0:o.Xz-x,[p,x]);return(null==s?void 0:s.last_modified_at)===void 0?{remainingDuration:0,isWithinCooldownWindow:!1,isLoading:l,isError:d,error:m,isSuccess:c}:{remainingDuration:h,isWithinCooldownWindow:h>0,isLoading:l,isError:d,error:m,isSuccess:c}}},62437:(e,t,a)=>{"use strict";a.d(t,{e:()=>d,p:()=>o});var i=a(80263),s=a(72342),r=a(25757),n=a(53239),l=a(51500);let o=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,i.jsx)(s.bL,{className:(0,l.cn)("grid gap-2",a),...r,ref:t})});o.displayName=s.bL.displayName;let d=n.forwardRef((e,t)=>{let{image:a,label:n,showIndicator:o=!0,...d}=e;return(0,i.jsxs)(s.q7,{ref:t,...d,className:(0,l.cn)("flex flex-col gap-2","w-48","bg-overlay","rounded-md","border","p-2","hover:border-foreground-muted","hover:z-[1] focus-visible:z-[1]","data-[state=checked]:z-[1]","data-[state=checked]:ring-2 data-[state=checked]:ring-border","data-[state=checked]:bg-surface-200 dark:data-[state=checked]:bg-surface-300","data-[state=checked]:border-foreground/50","transition-colors","group",d.className),children:[d.children,(0,i.jsxs)("label",{className:"flex gap-2 w-full",id:d.id,htmlFor:d.value,children:[o&&(0,i.jsx)("div",{className:" aspect-square h-4 w-4  rounded-full border group-data-[state=checked]:border-foreground-muted group-focus:border-foreground-muted group-hover:border-foreground-muted ring-offset-background  group-focus:outline-none  group-focus-visible:ring-2 group-focus-visible:ring-ring group-focus-visible:ring-offset-2  group-disabled:cursor-not-allowed group-disabled:opacity-50 flex items-center justify-center transition ",children:(0,i.jsx)(s.C1,{className:"flex items-center justify-center",children:(0,i.jsx)(r.A,{className:"h-2.5 w-2.5 fill-current text-current"})})}),(0,i.jsx)("div",{className:(0,l.cn)("w-full","text-xs transition-colors text-left","text-light","group-hover:text-foreground group-data-[state=checked]:text-foreground",d.disabled?"cursor-not-allowed":"cursor-pointer"),children:n})]})]})});d.displayName=s.q7.displayName},62984:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>tt});var i=a(80263),s=a(32981),r=a(60045),n=a(32144),l=a(88712),o=a(37055),d=a(95043),c=a(15601),u=a.n(c),m=a(53239),p=a(87494),x=a(73969),h=a(90478),f=a(98832),g=a(92882),y=a(62136),v=a(60954),j=a(93453),b=a(56947),S=a(65172),N=a(47114);async function w(e,t){let{projectRef:a}=e;if(!a)throw Error("Project ref is required");let{data:i,error:s}=await (0,S.Jt)("/platform/projects/{ref}/disk/custom-config",{params:{path:{ref:a}},signal:t});return s&&(0,S.H4)(s),i}let z=function(e){let{projectRef:t}=e,{enabled:a=!0,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,b.I)(N.n.diskAutoscaleConfig(t),e=>{let{signal:a}=e;return w({projectRef:t},a)},{enabled:a&&void 0!==t,...i})};var _=a(80251);async function P(e){let{projectRef:t,growthPercent:a,maxSizeGb:i,minIncrementGb:s}=e;if(!t)throw Error("projectRef is required");let{data:r,error:n}=await (0,S.bE)("/platform/projects/{ref}/disk/custom-config",{params:{path:{ref:t}},body:{growth_percent:a,max_size_gb:i,min_increment_gb:s}});return n&&(0,S.H4)(n),r}let k=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,n.jE)();return(0,_.n)(e=>P(e),{async onSuccess(t,a,s){let{projectRef:r}=a;await i.invalidateQueries(N.n.diskAutoscaleConfig(r)),await (null==e?void 0:e(t,a,s))},async onError(e,a,i){void 0===t?x.oR.error("Failed to update disk autoscale config: ".concat(e.message)):t(e,a,i)},...a})};async function I(e,t){let{projectRef:a}=e;if(!a)throw Error("Project ref is required");let{data:i,error:s}=await (0,S.Jt)("/platform/projects/{ref}/disk/util",{params:{path:{ref:a}},signal:t});return s&&(0,S.H4)(s),i}let T=function(e){let{projectRef:t}=e,{enabled:a=!0,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,b.I)(N.n.diskUtilization(t),e=>{let{signal:a}=e;return I({projectRef:t},a)},{enabled:a&&void 0!==t,...i})};var C=a(13929),D=a(6772),M=a(49972),R=a(20438),V=a(28614),A=a(75019),O=a(23385),F=a(63492),G=a(47452),B=a(40022),E=a(77635),L=a(55966),Z=a(51500),H=a(47142),X=a(2119);let U=e=>{let{formState:t}=e;return(0,i.jsx)(l.N,{mode:"wait","data-sentry-element":"AnimatePresence","data-sentry-component":"FormFooterChangeBadge","data-sentry-source-file":"FormFooterChangeBadge.tsx",children:Object.keys(t.dirtyFields).length>0&&(0,i.jsx)(o.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:(0,i.jsx)(o.P.div,{animate:{scale:[1,1.05,1],transition:{duration:.3}},children:(0,i.jsx)(X.E,{variant:"default",children:(0,i.jsx)(o.P.span,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.1},className:"text-sm",children:1===Object.keys(t.dirtyFields).length?"1 change to review":"".concat(Object.keys(t.dirtyFields).length," changes to review")},Object.keys(t.dirtyFields).length)})})})})};var q=a(39353),Y=a(14450),J=a(28738);let W=q.z.object({storageType:q.z.enum(["io2","gp3"]).describe("Type of storage: io2 or gp3"),totalSize:q.z.number().int("Value must be an integer").describe("Allocated disk size in GB"),provisionedIOPS:q.z.number().describe("Provisioned IOPS for storage type"),throughput:q.z.number().optional().describe("Throughput in MB/s for gp3"),computeSize:q.z.custom(e=>!0).describe("Compute size"),growthPercent:q.z.number().int("Value must be an integer").min(10,"Growth percent must be at least 10%").max(100,"Growth percent cannot exceed 100%").optional().nullable(),minIncrementGb:q.z.number().int("Value must be an integer").min(1,"Minimum increment must be at least 1 GB").max(200,"Minimum increment cannot exceed 200 GB").optional().nullable(),maxSizeGb:q.z.number().int("Value must be an integer").max(6e4,"Maximum size cannot exceed 60TB").optional().nullable()}),$=(e,t)=>{let a="FLY"===t;return W.superRefine((t,i)=>{let{storageType:s,totalSize:r,provisionedIOPS:n,throughput:l,maxSizeGb:o}=t;if(!a&&r<8&&i.addIssue({code:q.z.ZodIssueCode.custom,message:"Allocated disk size must be at least 8 GB.",path:["totalSize"]}),!a&&r<e&&i.addIssue({code:q.z.ZodIssueCode.custom,message:"Disk size cannot be reduced in size. Reduce your database size and then head to the Infrastructure settings and go through a Postgres version upgrade to right-size your disk.",path:["totalSize"]}),!a&&o&&o<r&&i.addIssue({code:q.z.ZodIssueCode.custom,message:"Max disk size cannot be lower than the current disk size. Must be at least ".concat((0,Y.ZV)(r)," GB."),path:["maxSizeGb"]}),!a&&"io2"===s){n>J.No[J.y6.IO2].maxIops&&i.addIssue({code:q.z.ZodIssueCode.custom,message:"IOPS can not exceed ".concat((0,Y.ZV)(J.No[J.y6.IO2].maxIops)," for io2 Disk type. Please reach out to support if you need higher IOPS than this."),path:["provisionedIOPS"]});let e=(0,Y.Fu)(r);if(n<J.No[J.y6.IO2].minIops)i.addIssue({code:q.z.ZodIssueCode.custom,message:"Provisioned IOPS must be at least ".concat((0,Y.ZV)(J.No[J.y6.IO2].minIops)),path:["provisionedIOPS"]});else if(n>e)if(r>=8){let t=(0,Y.it)(n);t>r&&i.addIssue({code:q.z.ZodIssueCode.custom,message:"Larger Disk size of at least ".concat((0,Y.ZV)(t)," GB required. Current max is ").concat((0,Y.ZV)(e)," IOPS."),path:["provisionedIOPS"]})}else i.addIssue({code:q.z.ZodIssueCode.custom,message:"Invalid IOPS value due to small disk size",path:["provisionedIOPS"]});void 0!==l&&i.addIssue({code:q.z.ZodIssueCode.custom,message:"Throughput is not configurable for io2.",path:["throughput"]}),r>J.No[J.y6.IO2].maxStorage&&i.addIssue({code:q.z.ZodIssueCode.custom,message:"Allocated disksize must not exceed ".concat((0,Y.ZV)(J.No[J.y6.IO2].maxStorage)," GB "),path:["totalSize"]})}if(!a&&"gp3"===s){let e=(0,Y.HE)(r);if(n>J.No[J.y6.GP3].maxIops&&i.addIssue({code:q.z.ZodIssueCode.custom,message:"IOPS can not exceed ".concat((0,Y.ZV)(J.No[J.y6.GP3].maxIops)," for GP3 Disk. Change the Disk type to io2 for higher IOPS support."),path:["provisionedIOPS"]}),n<J.No[J.y6.GP3].minIops)i.addIssue({code:q.z.ZodIssueCode.custom,message:"IOPS must be at least ".concat((0,Y.ZV)(J.No[J.y6.GP3].minIops)),path:["provisionedIOPS"]});else if(n>e)if(r>=8){let t=(0,Y.CQ)(n);i.addIssue({code:q.z.ZodIssueCode.custom,message:"Larger Disk size of at least ".concat((0,Y.ZV)(t)," GB required. Current max is ").concat((0,Y.ZV)(e)," IOPS."),path:["provisionedIOPS"]})}else i.addIssue({code:q.z.ZodIssueCode.custom,message:"Invalid IOPS value due to invalid disk size",path:["provisionedIOPS"]});if(void 0!==l){let e=Math.min(.25*n,1e3);if(l>J.No.gp3.maxThroughput&&i.addIssue({code:q.z.ZodIssueCode.custom,message:"Throughput can not exceed ".concat((0,Y.ZV)(e)," MB/s"),path:["throughput"]}),l>e){let e=(0,Y.a6)(l);i.addIssue({code:q.z.ZodIssueCode.custom,message:"Need at least ".concat((0,Y.ZV)(e)," IOPS to support ").concat((0,Y.ZV)(l)," MB/s."),path:["throughput"]})}l<J.No[J.y6.GP3].minThroughput&&i.addIssue({code:q.z.ZodIssueCode.custom,message:"Throughput must be at least ".concat((0,Y.ZV)(J.No[J.y6.GP3].minThroughput)," MB/s"),path:["throughput"]})}r>J.No[J.y6.GP3].maxStorage&&i.addIssue({code:q.z.ZodIssueCode.custom,message:"Allocated disksize must not exceed ".concat((0,Y.ZV)(J.No[J.y6.GP3].maxStorage)," GB"),path:["totalSize"]})}})};var Q=a(36272),K=a(16838),ee=a(86254);let et=e=>{let{visible:t,title:a,description:s}=e;return(0,i.jsx)(l.N,{"data-sentry-element":"AnimatePresence","data-sentry-component":"DiskMangementRestartRequiredSection","data-sentry-source-file":"DiskManagementRestartRequiredSection.tsx",children:t&&(0,i.jsx)(o.P.div,{initial:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.15},className:"w-full",children:(0,i.jsxs)(K.OO,{className:"bg-surface-100 text-sm text-foreground-light flex items-center gap-4 relative w-full rounded-md border-spacing-0 border",children:[(0,i.jsx)("div",{className:"w-12 h-12",children:(0,i.jsxs)("div",{className:"relative w-10 h-10 m-1 bg-alternative text-foreground border rounded-full flex items-center justify-center",children:[(0,i.jsx)(Q.A,{strokeWidth:1}),(0,i.jsx)(ee.id,{className:"absolute -right-1.5 -top-1.5"})]})}),(0,i.jsxs)("div",{className:"flex flex-col gap-0 flex-grow",children:[(0,i.jsx)("p",{className:"text-sm text-foreground",children:a}),(0,i.jsx)("p",{className:"text-sm text-foreground-light",children:s})]})]})})})};var ea=a(88602),ei=a(34531),es=a(3434),er=a(1012),en=a(78721);let el=e=>{let{beforePrice:t,afterPrice:a,show:s,tooltip:r,className:n,free:c}=e;return(0,i.jsx)(l.N,{"data-sentry-element":"AnimatePresence","data-sentry-component":"BillingChangeBadge","data-sentry-source-file":"BillingChangeBadge.tsx",children:void 0!==t&&void 0!==a&&s&&(0,i.jsx)(o.P.div,{initial:{opacity:0,x:-4,height:0},animate:{opacity:1,x:0,height:"auto"},exit:{opacity:0,x:-4,height:0},transition:{type:"spring",stiffness:800,damping:40,duration:.3},children:(0,i.jsx)(X.E,{variant:"default",className:(0,Z.cn)(c?"bg-violet-200 border-violet-900 text-violet-1100":"bg-alternative","bg-opacity-100 text-warning",n),children:(0,i.jsxs)(en.m_,{children:[(0,i.jsx)(en.k$,{asChild:!0,children:(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("span",{className:"text-xs font-mono text-foreground-muted",translate:"no",children:(0,ei.vv)(t)}),(0,i.jsx)(d.A,{size:12,strokeWidth:2,className:"text-foreground-muted"}),(0,i.jsx)(o.P.span,{className:(0,Z.cn)(c?"text-violet-1100":"text-foreground","text-xs font-mono"),animate:{scale:[1,1.1,1]},transition:{duration:.12},translate:"no",children:"".concat((0,ei.vv)(a),"/month")},a)]})}),void 0!==r&&(0,i.jsx)(en.ZI,{side:"bottom",children:r})]})})})})};var eo=a(41764),ed=a(75342),ec=a(57089),eu=a(44958);let em={timeRemaining:{label:"timeRemaining",color:"hsl(var(--warning-default))"},hand:{label:"hand",color:"hsl(var(--warning-default))"}},ep=e=>{let{progress:t}=e;return(0,i.jsxs)("div",{className:"relative w-12 h-12","data-sentry-component":"CountdownTimerRadial","data-sentry-source-file":"CountdownTimerRadial.tsx",children:[(0,i.jsx)(eu.at,{config:em,className:"absolute w-12 h-12","data-sentry-element":"ChartContainer","data-sentry-source-file":"CountdownTimerRadial.tsx",children:(0,i.jsxs)(eo.D,{data:[{timeRemaining:100,fill:"var(--color-timeRemaining)"}],startAngle:90,endAngle:90-360*t/100,innerRadius:21,outerRadius:14,"data-sentry-element":"RadialBarChart","data-sentry-source-file":"CountdownTimerRadial.tsx",children:[(0,i.jsx)(ed.z,{gridType:"circle",radialLines:!1,stroke:"none",className:"first:fill-foreground-muted/50 last:fill-background-200",polarRadius:[16,11],"data-sentry-element":"PolarGrid","data-sentry-source-file":"CountdownTimerRadial.tsx"}),(0,i.jsx)(ec.Z,{dataKey:"timeRemaining",cornerRadius:2,"data-sentry-element":"RadialBar","data-sentry-source-file":"CountdownTimerRadial.tsx"})]})}),(0,i.jsx)(eu.at,{config:em,className:"absolute top-1 left-1 w-10 h-10","data-sentry-element":"ChartContainer","data-sentry-source-file":"CountdownTimerRadial.tsx",children:(0,i.jsx)(eo.D,{data:[{hand:100,fill:"var(--color-hand)"}],startAngle:80-360*t/100,endAngle:140-360*t/100,innerRadius:14,outerRadius:5,"data-sentry-element":"RadialBarChart","data-sentry-source-file":"CountdownTimerRadial.tsx",children:(0,i.jsx)(ec.Z,{dataKey:"hand",cornerRadius:2,isAnimationActive:!0,"data-sentry-element":"RadialBar","data-sentry-source-file":"CountdownTimerRadial.tsx"})})})]})},ex=e=>{let{visible:t}=e,[a,s]=(0,m.useState)(100),[r,n]=(0,m.useState)(!1),[d,c]=(0,m.useState)(!1);return(0,m.useEffect)(()=>{let e=()=>{n(!0),s(100);let t=setInterval(()=>{s(a=>a<=0?(clearInterval(t),c(!0),setTimeout(()=>{c(!1),s(100),e()},300),0):a-1)},100);return()=>clearInterval(t)},t=setTimeout(e,1e3);return()=>clearTimeout(t)},[]),(0,i.jsx)(l.N,{"data-sentry-element":"AnimatePresence","data-sentry-component":"DiskMangementCoolDownSection","data-sentry-source-file":"DiskManagementCoolDownSection.tsx",children:t&&(0,i.jsx)(o.P.div,{initial:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.15},className:"w-full",children:(0,i.jsxs)(K.OO,{className:"bg-surface-100 text-sm text-foreground-light flex items-center gap-4 relative w-full border rounded-md",children:[(0,i.jsx)("div",{className:"w-12 h-12",children:(0,i.jsx)(l.N,{children:r&&(0,i.jsx)(o.P.div,{initial:{scale:.8,opacity:0,y:-8},animate:{scale:d?1.2:1,opacity:1,y:d?-8:0},exit:{scale:.8,opacity:0,y:-8},transition:{duration:d?.3:.8,type:"spring",bounce:.6},children:(0,i.jsx)(ep,{progress:a})},"countdown-timer")})}),(0,i.jsxs)("div",{className:"flex flex-col gap-0 flex-grow",children:[(0,i.jsx)("p",{className:"text-sm text-foreground",children:"For 6 hours you will not be able to change any disk attributes."}),(0,i.jsx)("p",{className:"text-sm text-foreground-light",children:"There is a cooldown period enforced for any disk attribute modifications"})]})]})})})},eh=()=>(0,i.jsxs)(es.Hj,{"data-sentry-element":"TableRow","data-sentry-component":"TableHeaderRow","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,i.jsx)(es.nd,{className:"w-[140px] pl-5","data-sentry-element":"TableHead","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Disk attribute"}),(0,i.jsx)(es.nd,{className:"text-right","data-sentry-element":"TableHead","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"-"}),(0,i.jsx)(es.nd,{className:"w-[100px]","data-sentry-element":"TableHead","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Unit"}),(0,i.jsx)(es.nd,{className:"text-right pr-5","data-sentry-element":"TableHead","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Price Change"})]}),ef=e=>{let{attribute:t,defaultValue:a,newValue:s,unit:r,beforePrice:n,afterPrice:l,hidePrice:o=!1,priceTooltip:c,upgradeIncluded:u=!1}=e;return(0,i.jsxs)(es.Hj,{"data-sentry-element":"TableRow","data-sentry-component":"TableDataRow","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,i.jsx)(es.nA,{className:"pl-5","data-sentry-element":"TableCell","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:(0,i.jsx)("div",{className:"flex flex-row gap-2 items-center",children:(0,i.jsx)("span",{children:t})})}),(0,i.jsx)(es.nA,{className:"text-right font-mono","data-sentry-element":"TableCell","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:a!==s?(0,i.jsx)(X.E,{variant:"default",className:"bg-alternative bg-opacity-100",children:(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("span",{className:"text-xs font-mono text-foreground-muted",children:a.toString()}),(0,i.jsx)(d.A,{size:12,strokeWidth:2,className:"text-foreground-muted"}),(0,i.jsx)("span",{className:"text-xs font-mono text-foreground",children:s.toString()})]})}):(0,i.jsxs)("span",{className:"text-xs font-mono",children:[(0,i.jsx)("span",{className:"text-foreground-muted"}),a]})}),(0,i.jsx)(es.nA,{className:"text-xs font-mono","data-sentry-element":"TableCell","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:r}),(0,i.jsx)(es.nA,{className:"text-right pr-5","data-sentry-element":"TableCell","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:!u&&o?(0,i.jsx)("span",{className:"text-xs font-mono",children:"-"}):n!==l||u?(0,i.jsx)(el,{show:!0,beforePrice:n,afterPrice:l,tooltip:c,free:u}):(0,i.jsx)("span",{className:"text-xs font-mono",translate:"no",children:(0,ei.vv)(n)})})]})},eg=e=>{var t,a,s,n,l,o,d,c,u,p,x,h,g,y,v,j,b,S,N,w,z,_,P,k,I,T,C,D,M,V,F,G,E,L,Z,H,X,U,q,W,$,Q,ei,en;let{isDialogOpen:el,setIsDialogOpen:eo,disabled:ed,form:ec,numReplicas:eu,loading:em,onSubmit:ep,message:eg,buttonSize:ey="medium"}=e,{project:ev}=(0,f.Om)(),ej=(0,O.a)(),{formState:eb,getValues:eS}=ec,eN=(0,A.SE)(r.aG.UPDATE,"projects",{resource:{project_id:null==ev?void 0:ev.id}}),{data:ew}=(0,R.Q)({projectRef:null==ev?void 0:ev.ref}),ez=null!=(F=null==ej?void 0:ej.plan.id)?F:"free",e_=!!Object.keys(ec.formState.dirtyFields).length,eP="Price change includes primary database and ".concat(eu," replica").concat(eu>1?"s":""),ek=(0,m.useMemo)(()=>{var e;return null!=(e=null==ew?void 0:ew.available_addons)?e:[]},[ew]),eI=(0,m.useMemo)(()=>(0,Y.$C)(ek,null==ev?void 0:ev.cloud_provider),[ek,null==ev?void 0:ev.cloud_provider]),eT=(0,Y.Uk)({availableOptions:eI,oldComputeSize:(null==(t=ec.formState.defaultValues)?void 0:t.computeSize)||"ci_micro",newComputeSize:ec.getValues("computeSize"),plan:null!=(G=null==ej?void 0:ej.plan.id)?G:"free"}),eC=(0,Y.WC)({planId:ez,oldSize:(null==(a=eb.defaultValues)?void 0:a.totalSize)||0,oldStorageType:null==(s=eb.defaultValues)?void 0:s.storageType,newSize:eS("totalSize"),newStorageType:eS("storageType"),numReplicas:eu}),eD=(0,Y.t5)({oldStorageType:null==(n=ec.formState.defaultValues)?void 0:n.storageType,oldProvisionedIOPS:(null==(l=ec.formState.defaultValues)?void 0:l.provisionedIOPS)||0,newStorageType:ec.getValues("storageType"),newProvisionedIOPS:ec.getValues("provisionedIOPS"),numReplicas:eu}),eM=(0,Y.ou)({storageType:ec.getValues("storageType"),newThroughput:ec.getValues("throughput")||0,oldThroughput:(null==(o=ec.formState.defaultValues)?void 0:o.throughput)||0,numReplicas:eu}),eR=(null==(d=ec.formState.defaultValues)?void 0:d.computeSize)!==ec.getValues("computeSize"),eV=(null==(c=ec.formState.defaultValues)?void 0:c.totalSize)!==ec.getValues("totalSize"),eA=(null==(u=ec.formState.defaultValues)?void 0:u.storageType)!==ec.getValues("storageType"),eO=(null==(p=ec.formState.defaultValues)?void 0:p.throughput)!==ec.getValues("throughput"),eF=(null==(x=ec.formState.defaultValues)?void 0:x.provisionedIOPS)!==ec.getValues("provisionedIOPS"),eG=(null==(h=ec.formState.defaultValues)?void 0:h.growthPercent)!==ec.getValues("growthPercent"),eB=(null==(g=ec.formState.defaultValues)?void 0:g.minIncrementGb)!==ec.getValues("minIncrementGb"),eE=(null==(y=ec.formState.defaultValues)?void 0:y.maxSizeGb)!==ec.getValues("maxSizeGb"),eL=eF||eO&&"gp3"===ec.getValues("storageType")||eV;return(0,i.jsxs)(K.lG,{open:el,onOpenChange:eo,"data-sentry-element":"Dialog","data-sentry-component":"DiskManagementReviewAndSubmitDialog","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,i.jsx)(K.zM,{asChild:!0,"data-sentry-element":"DialogTrigger","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:(0,i.jsx)(ea.G,{size:ey,htmlType:"submit",type:"primary",onClick:async e=>{e.preventDefault(),await ec.trigger()&&eo(!0)},disabled:ed||!e_,tooltip:{content:{side:"bottom",text:eN?ed?"Current form values are invalid":void 0:"You need additional permissions to update disk configuration"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Review changes"})}),(0,i.jsxs)(K.Cf,{className:"min-w-[620px]","data-sentry-element":"DialogContent","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,i.jsxs)(K.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,i.jsx)(K.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Review changes"}),(0,i.jsx)(K.rr,{"data-sentry-element":"DialogDescription","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Changes will be applied shortly once confirmed."})]}),(0,i.jsx)(K.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx"}),(eR||eL)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex flex-col gap-2 p-5",children:[(0,i.jsx)(et,{visible:eR,title:"Resizing your Compute will trigger a project restart",description:"Project will restart automatically on confirmation."}),(0,i.jsx)(ex,{visible:eL})]}),(0,i.jsx)(K.pf,{})]}),(0,i.jsxs)(es.XI,{"data-sentry-element":"Table","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,i.jsx)(es.A0,{className:"font-mono uppercase text-xs [&_th]:h-auto [&_th]:pb-2 [&_th]:pt-4","data-sentry-element":"TableHeader","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:(0,i.jsx)(eh,{"data-sentry-element":"TableHeaderRow","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx"})}),(0,i.jsxs)(es.BF,{className:"[&_td]:py-0 [&_tr]:h-[50px] [&_tr]:border-dotted","data-sentry-element":"TableBody","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[eR&&(0,i.jsx)(ef,{attribute:"Compute size",defaultValue:(0,Y.ku)(null!=(E=null==(v=ec.formState.defaultValues)?void 0:v.computeSize)?E:"ci_nano"),newValue:(0,Y.ku)(ec.getValues("computeSize")),unit:"-",beforePrice:Number(eT.oldPrice),afterPrice:Number(eT.newPrice),upgradeIncluded:(null==ej?void 0:ej.plan.id)!=="free"&&(null==ev?void 0:ev.infra_compute_size)==="nano"&&"ci_micro"===ec.getValues("computeSize")}),eA&&(0,i.jsx)(ef,{hidePrice:!0,attribute:"Storage Type",defaultValue:null!=(L=null==(j=ec.formState.defaultValues)?void 0:j.storageType)?L:"",newValue:ec.getValues("storageType"),unit:"-",beforePrice:0,afterPrice:0}),(eF||eA)&&(0,i.jsx)(ef,{attribute:"IOPS",defaultValue:null!=(Z=null==(S=ec.formState.defaultValues)||null==(b=S.provisionedIOPS)?void 0:b.toLocaleString())?Z:0,newValue:null==(N=ec.getValues("provisionedIOPS"))?void 0:N.toLocaleString(),unit:"IOPS",beforePrice:Number(eD.oldPrice),afterPrice:Number(eD.newPrice),priceTooltip:eu>0?eP:void 0}),"gp3"===ec.getValues("storageType")&&eO&&(0,i.jsx)(ef,{attribute:"Throughput",defaultValue:null!=(H=null==(z=ec.formState.defaultValues)||null==(w=z.throughput)?void 0:w.toLocaleString())?H:0,newValue:null!=(X=null==(_=ec.getValues("throughput"))?void 0:_.toLocaleString())?X:0,unit:"MB/s",beforePrice:Number(eM.oldPrice),afterPrice:Number(eM.newPrice),priceTooltip:eu>0?eP:void 0}),(eV||eA)&&(0,i.jsx)(ef,{attribute:"Disk size",defaultValue:null!=(U=null==(k=ec.formState.defaultValues)||null==(P=k.totalSize)?void 0:P.toLocaleString())?U:0,newValue:null==(I=ec.getValues("totalSize"))?void 0:I.toLocaleString(),unit:"GB",beforePrice:Number(eC.oldPrice),afterPrice:Number(eC.newPrice),priceTooltip:eu>0?eP:void 0}),eG&&(0,i.jsx)(ef,{attribute:"Growth percent",defaultValue:null!=(q=null==(T=ec.formState.defaultValues)?void 0:T.growthPercent)?q:J.SZ.growthPercent,newValue:null!=(W=ec.getValues("growthPercent"))?W:J.SZ.growthPercent,unit:"%",beforePrice:0,afterPrice:0}),eB&&(0,i.jsx)(ef,{attribute:"Min increment",defaultValue:null!=($=null==(C=ec.formState.defaultValues)?void 0:C.minIncrementGb)?$:J.SZ.minIncrementSize,newValue:null!=(Q=ec.getValues("minIncrementGb"))?Q:J.SZ.minIncrementSize,unit:"GB",beforePrice:0,afterPrice:0}),eE&&(0,i.jsx)(ef,{attribute:"Max disk size",defaultValue:null!=(ei=null==(M=ec.formState.defaultValues)||null==(D=M.maxSizeGb)?void 0:D.toLocaleString())?ei:J.SZ.maxSizeGb,newValue:null!=(en=null==(V=ec.getValues("maxSizeGb"))?void 0:V.toLocaleString())?en:J.SZ.maxSizeGb,unit:"GB",beforePrice:0,afterPrice:0})]})]}),eu>0&&(0,i.jsx)("div",{className:"border-t px-4 py-2 text-sm text-foreground-lighter",children:eP}),(0,i.jsxs)(K.Es,{"data-sentry-element":"DialogFooter","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,i.jsx)(B.$,{block:!0,size:"large",type:"default",onClick:()=>eo(!1),"data-sentry-element":"Button","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Cancel"}),(0,i.jsx)(B.$,{block:!0,type:"warning",size:"large",htmlType:"submit",loading:em,onClick:async()=>{await ep(ec.getValues())},"data-sentry-element":"Button","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Confirm changes"})]}),eg&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(K.pf,{}),(0,i.jsx)(K.OO,{children:(0,i.jsxs)(er.Fc,{variant:"error"===eg.type?"destructive":"default",className:"",children:[(0,i.jsx)(ee.id,{}),(0,i.jsx)(er.XL,{children:eg.message})]})})]})]})]})};var ey=a(93210),ev=a(53555),ej=a(61395);let eb=function(e){let{message:t="error",type:a,children:s}=e;return(0,i.jsx)(l.N,{"data-sentry-element":"AnimatePresence","data-sentry-component":"FormMessage","data-sentry-source-file":"FormMessage.tsx",children:t&&(0,i.jsx)(o.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:(0,i.jsx)(H.Z,{type:"error"===a?"destructive":"default",className:"mt-2",title:t,children:s})})})},eS=(0,m.forwardRef)((e,t)=>{let{children:a,label:s}=e;return(0,i.jsxs)("div",{ref:t,className:"flex -space-x-px",children:[a,(0,i.jsx)("div",{className:"border border-strong bg-surface-300 rounded-r-md px-3 flex items-center justify-center",children:(0,i.jsx)("span",{className:"text-foreground-lighter text-xs font-mono",children:s})})]})});eS.displayName="InputPostTab";let eN=e=>{let{form:t}=e,{ref:a}=(0,h.g)(),{control:s,setValue:r,formState:{errors:n}}=t,{totalSize:l,growthPercent:o,maxSizeGb:d,minIncrementGb:c}=t.watch(),{error:u,isLoading:m,isError:p}=z({projectRef:a}),x=null!=o?o:J.SZ.growthPercent,f=null!=c?c:J.SZ.minIncrementSize,g=n.maxSizeGb?J.SZ.maxSizeGb:null!=d?d:J.SZ.maxSizeGb,y=Math.floor(x/100*l),v=Math.min(Math.max(Math.floor(l*x/100),f),200)+l,j=v<g?v:g,b=j-l;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(G.zB,{name:"growthPercent",control:s,render:e=>{var t;let{field:a}=e;return(0,i.jsxs)(ej.M,{layout:"horizontal",label:"Autoscale growth percent",id:a.name,labelOptional:"Percentage of current disk size to grow",description:n.growthPercent?void 0:"This amounts to ".concat(y," GB based on the current disk size of ").concat(l," GB"),className:"[&>div>span]:text-foreground-lighter",children:[(0,i.jsx)(eS,{label:"%",children:m?(0,i.jsx)("div",{className:(0,Z.cn)((0,ey.L)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,i.jsx)(ev.E,{className:"w-10 h-4"})}):(0,i.jsx)(G.MJ,{children:(0,i.jsx)(ey.p,{...a,type:"number",className:"flex-grow font-mono rounded-r-none max-w-20",value:null!=(t=a.value)?t:void 0,disabled:p,onChange:e=>{r("growthPercent",""===e.target.value?null:e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})},placeholder:String(J.SZ.growthPercent)})})}),u&&(0,i.jsx)(eb,{type:"error",message:u.message})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"AutoScaleFields.tsx"}),(0,i.jsx)(G.zB,{name:"minIncrementGb",control:s,render:e=>{var t;let{field:a}=e;return(0,i.jsxs)(ej.M,{layout:"horizontal",label:"Minimum increment",id:a.name,labelOptional:"Minimum value to autoscale disk size by",description:c&&c>y&&!n.minIncrementGb?"This value takes precedence as the minimum increment is larger than the growth percent":void 0,className:"[&>div>span]:text-foreground-lighter",children:[(0,i.jsx)(eS,{label:"GB",children:m?(0,i.jsx)("div",{className:(0,Z.cn)((0,ey.L)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,i.jsx)(ev.E,{className:"w-10 h-4"})}):(0,i.jsx)(G.MJ,{children:(0,i.jsx)(ey.p,{...a,type:"number",className:"flex-grow font-mono rounded-r-none max-w-32",value:null!=(t=a.value)?t:void 0,disabled:p,onChange:e=>{r("minIncrementGb",""===e.target.value?null:e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})},placeholder:String(J.SZ.minIncrementSize)})})}),u&&(0,i.jsx)(eb,{type:"error",message:u.message})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"AutoScaleFields.tsx"}),(0,i.jsx)(G.zB,{name:"maxSizeGb",control:s,render:e=>{var t;let{field:a}=e;return(0,i.jsxs)(ej.M,{layout:"horizontal",label:"Maximum disk size",id:a.name,labelOptional:"Maximum size that the disk can grow to",className:"[&>div>span]:text-foreground-lighter",children:[(0,i.jsx)(eS,{label:"GB",children:m?(0,i.jsx)("div",{className:(0,Z.cn)((0,ey.L)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,i.jsx)(ev.E,{className:"w-10 h-4"})}):(0,i.jsx)(G.MJ,{children:(0,i.jsx)(ey.p,{...a,type:"number",className:"flex-grow font-mono rounded-r-none max-w-32",value:null!=(t=a.value)?t:void 0,disabled:p,onChange:e=>{r("maxSizeGb",""===e.target.value?null:e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})},placeholder:String(J.SZ.maxSizeGb)})})}),u&&(0,i.jsx)(eb,{type:"error",message:u.message})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"AutoScaleFields.tsx"}),(0,i.jsxs)(H.Z,{type:"default",showIcon:!1,className:"[&>div]:text-foreground-light",children:["Disk size will automatically be expanded by"," ",(0,i.jsxs)("span",{className:"text-foreground",children:[String(b).length>4?b.toFixed(2):b," ","GB"]})," ","to a total of ",(0,i.jsxs)("span",{className:"text-foreground",children:[j," GB"]})," ","when the database reaches 90% of the disk size"]})]})};var ew=a(36902),ez=a(5685),e_=a(91473),eP=a(12578),ek=a(69914),eI=a(62437),eT=a(30169),eC=a(96132);function eD(e){var t,a,s,r;let{form:n,disabled:l}=e,{ref:o}=(0,h.g)(),d=(0,O.a)(),{control:c,formState:p,setValue:x,trigger:g}=n,{project:v,isLoading:j}=(0,f.Om)(),{data:b,isLoading:S,error:N}=(0,R.Q)({projectRef:o}),w=j||S,z=(0,m.useMemo)(()=>{var e;return null!=(e=null==b?void 0:b.available_addons)?e:[]},[b]),_=(0,m.useMemo)(()=>(0,Y.$C)(z,null==v?void 0:v.cloud_provider),[z,null==v?void 0:v.cloud_provider]),P=null==b?void 0:b.selected_addons.find(e=>"pitr"===e.type),k=(0,Y.Uk)({availableOptions:_,oldComputeSize:(null==(t=n.formState.defaultValues)?void 0:t.computeSize)||"ci_micro",newComputeSize:n.getValues("computeSize"),plan:null!=(a=null==d?void 0:d.plan.id)?a:"free"}),I=(0,Y.QV)(null!=(s=null==d?void 0:d.plan.id)?s:"free",null!=(r=null==v?void 0:v.infra_compute_size)?r:"nano");return(0,i.jsx)(G.zB,{name:"computeSize",control:c,render:e=>{let{field:t}=e;return(0,i.jsx)(eI.p,{...t,onValueChange:e=>{x("computeSize",e,{shouldDirty:!0,shouldValidate:!0}),g("provisionedIOPS"),g("throughput")},defaultValue:t.value,disabled:l,children:(0,i.jsx)(ej.M,{layout:"horizontal",label:"Compute size",id:t.name,className:"gap-5",labelOptional:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(el,{className:"mb-2",show:p.isDirty&&p.dirtyFields.computeSize&&!p.errors.computeSize,beforePrice:Number(k.oldPrice),afterPrice:Number(k.newPrice),free:!!I&&"ci_micro"===n.watch("computeSize")}),(0,i.jsx)("p",{className:"text-foreground-lighter",children:"Hardware resources allocated to your Postgres database"}),(0,i.jsx)("div",{className:"mt-3",children:(0,i.jsx)(y.A,{abbrev:!1,href:"https://supabase.com/docs/guides/platform/compute-and-disk"})}),(0,i.jsx)(eC.Y,{showIcon:!1,type:"default",className:"mt-3 border-violet-900 bg-violet-200 [&_h5]:text-violet-1100",visible:I&&"ci_nano"===n.watch("computeSize"),title:"Upgrade to Micro Compute",description:"This Project is already paying for Micro Compute. You can upgrade to Micro Compute at any time when convenient."})]}),children:(0,i.jsx)("div",{className:N?"":"grid gap-4 grid-cols-[repeat(auto-fit,minmax(min(100%,13em),1fr))]",children:w?Array(10).fill(0).map((e,t)=>(0,i.jsx)(ev.E,{className:"w-full h-[110px] rounded-md"},t)):N?(0,i.jsx)(eb,{message:"Failed to load Compute size options",type:"error",children:(0,i.jsx)("p",{children:null==N?void 0:N.message})}):(0,i.jsxs)(i.Fragment,{children:[_.map(e=>{var t,a,s,r,n,o;let c=(0,ek.g)(null==v?void 0:v.cloud_provider),u="ci_micro"===e.identifier&&!!P,m=(null==d?void 0:d.plan.id)!=="free"&&(null==v?void 0:v.infra_compute_size)!=="nano"&&"ci_nano"===e.identifier||u,p=(null==d?void 0:d.plan.id)!=="free"&&(null==v?void 0:v.infra_compute_size)==="nano"&&"ci_nano"===e.identifier?null==(t=_.find(e=>"ci_micro"===e.identifier))?void 0:t.price:e.price;return(0,i.jsx)(eI.e,{showIndicator:!1,id:e.identifier,value:e.identifier,className:(0,Z.cn)("relative text-sm text-left flex flex-col gap-0 px-0 py-3 [&_label]:w-full group] w-full h-[110px]",m&&"opacity-50"),disabled:l||m,label:(0,i.jsxs)(en.m_,{children:[(0,i.jsx)(en.k$,{asChild:!0,children:(0,i.jsxs)("div",{children:[I&&"ci_micro"===e.identifier&&(0,i.jsx)("div",{className:"absolute -top-4 -right-3 text-violet-1100 flex items-center gap-1 bg-surface-75 py-0.5 px-2 rounded-full border border-violet-900",children:(0,i.jsx)("span",{children:"No additional charge"})}),(0,i.jsxs)("div",{className:"w-full flex flex-col gap-3 justify-between",children:[(0,i.jsxs)("div",{className:"relative px-3 opacity-50 group-data-[state=checked]:opacity-100 flex justify-between",children:[(0,i.jsx)(eT.R,{className:"inline-flex font-semibold",infraComputeSize:e.name}),(0,i.jsx)("div",{className:"flex items-center space-x-1",children:m?(0,i.jsx)("div",{className:"bg border rounded-lg h-7 w-7 flex items-center justify-center",children:(0,i.jsx)(ew.A,{size:14})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("span",{className:"text-foreground text-sm font-semibold",translate:"no",children:["$",p]}),(0,i.jsxs)("span",{className:"text-foreground-light translate-y-[1px]",children:[" ","/"," ","monthly"===e.price_interval?"month":"hour"]})]})})]}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsxs)("div",{className:"px-3 text-sm flex flex-col gap-1",children:[(0,i.jsxs)("div",{className:"text-foreground-light flex gap-2 items-center",children:[(0,i.jsx)(ez.A,{strokeWidth:1,size:14,className:"text-foreground-lighter"}),(0,i.jsxs)("span",{children:["ci_nano"===e.identifier&&"Up to ",null!=(n=null==(a=e.meta)?void 0:a.memory_gb)?n:0," GB memory"]})]}),(0,i.jsxs)("div",{className:"text-foreground-light flex gap-2 items-center",children:[(0,i.jsx)(e_.A,{strokeWidth:1,size:14,className:"text-foreground-lighter"}),(0,i.jsxs)("span",{children:[null!=(o=null==(s=e.meta)?void 0:s.cpu_cores)?o:0,(null==(r=e.meta)?void 0:r.cpu_cores)!=="Shared"&&"-core ".concat(c)," ","CPU"]})]})]})})]})]})}),u&&(0,i.jsxs)(en.ZI,{side:"bottom",className:"w-64 text-center",children:["Project has PITR enabled which requires a minimum of Small compute. Please"," ",(0,i.jsx)(eP.g,{href:"/project/_/settings/addons?panel=pitr",children:"disable PITR"})," ","first before selecting Micro"]})]})},e.identifier)}),(0,i.jsx)(eI.e,{id:"larger-compute",showIndicator:!1,value:"larger-compute",onClick:e=>e.preventDefault(),className:(0,Z.cn)("relative text-sm text-left flex flex-col gap-0 px-0 py-3 [&_label]:w-full group] w-full h-[110px]"),label:(0,i.jsx)(u(),{href:"/support/new?projectRef=".concat(o,"&category=sales&subject=Enquiry%20about%20larger%20instance%20sizes"),children:(0,i.jsxs)("div",{className:"w-full flex flex-col gap-3 justify-between",children:[(0,i.jsxs)("div",{className:"relative px-3 flex justify-between",children:[(0,i.jsx)(eT.R,{infraComputeSize:">16XL"}),(0,i.jsx)("div",{className:"flex items-center space-x-1 opacity-50 ",children:(0,i.jsx)("span",{className:"text-foreground-light text-sm",children:"Contact Us"})})]}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsxs)("div",{className:"px-3 text-sm flex flex-col gap-1",children:[(0,i.jsxs)("div",{className:"text-foreground-light flex gap-2 items-center",children:[(0,i.jsx)(ez.A,{strokeWidth:1,size:14,className:"text-foreground-lighter"}),(0,i.jsx)("span",{children:"Custom memory"})]}),(0,i.jsxs)("div",{className:"text-foreground-light flex gap-2 items-center",children:[(0,i.jsx)(e_.A,{strokeWidth:1,size:14,className:"text-foreground-lighter"}),(0,i.jsx)("span",{children:"Custom CPU"})]})]})})]})})},"larger-compute")]})})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-component":"ComputeSizeField","data-sentry-source-file":"ComputeSizeField.tsx"})}var eM=a(53434),eR=a.n(eM),eV=a(5483),eA=a(61662);let eO=e=>{var t,a;let{isDirty:s,totalSize:r,usedSize:n,newTotalSize:d,oldStorageType:c,newStorageType:u}=e,{ref:m}=(0,h.g)(),{data:p}=(0,D.Vh)({projectRef:m}),x=(null!=p?p:[]).filter(e=>e.identifier!==m),f=r*(null==(t=J.zN[c])?void 0:t.storage),g=d*(null==(a=J.zN[u])?void 0:a.storage);return 0===x.length?null:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l.N,{"data-sentry-element":"AnimatePresence","data-sentry-source-file":"DiskManagementReadReplicas.tsx",children:s&&(0,i.jsx)(o.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:(0,i.jsxs)(er.Fc,{variant:"default",className:"bg-transparent",children:[(0,i.jsx)(ee.mo,{}),(0,i.jsx)(er.XL,{children:"Read replicas are provisioned with extra 25% disk size to account for WAL files"}),(0,i.jsxs)(er.TN,{children:["Each replica will have a disk size of ",d,"GB, and are billed separately",(0,i.jsx)("ul",{className:"list-disc pl-4 my-3 flex flex-col gap-2",children:x.map((e,t)=>(0,i.jsx)("li",{className:"marker:text-foreground-light",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{children:["ID: ",(0,eA.s)(e.identifier)," (",e.region,"):"]}),(0,i.jsx)(el,{show:!0,beforePrice:f,afterPrice:g})]})},t))})]})]})})})})},eF=e=>{var t,a,s,r;let{isDirty:n,oldIOPS:d,newIOPS:c,oldStorageType:u,newStorageType:m}=e,{ref:p}=(0,h.g)(),{data:x}=(0,D.Vh)({projectRef:p}),f=(null!=x?x:[]).filter(e=>e.identifier!==p),g=(d-(null==(t=J.No[u])?void 0:t.includedIops))*(null==(a=J.zN[u])?void 0:a.iops),y=(c-(null==(s=J.No[m])?void 0:s.includedIops))*(null==(r=J.zN[m])?void 0:r.iops);return 0===f.length?null:(0,i.jsx)(l.N,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"DiskManagementIOPSReadReplicas","data-sentry-source-file":"DiskManagementReadReplicas.tsx",children:n&&(0,i.jsx)(o.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:(0,i.jsxs)(er.Fc,{variant:"default",className:"bg-transparent",children:[(0,i.jsx)(ee.mo,{}),(0,i.jsx)(er.XL,{children:"Read replica IOPS will also be updated to the same value"}),(0,i.jsx)(er.TN,{children:(0,i.jsx)("ul",{className:"list-disc pl-4 my-3 flex flex-col gap-2",children:f.map((e,t)=>(0,i.jsx)("li",{className:"marker:text-foreground-light",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{children:["ID: ",(0,eA.s)(e.identifier)," (",e.region,"):"]}),(0,i.jsx)(el,{show:!0,beforePrice:g,afterPrice:y})]})},t))})})]})})})},eG=e=>{var t,a;let{isDirty:s,oldThroughput:r,newThroughput:n,oldStorageType:d,newStorageType:c}=e,{ref:u}=(0,h.g)(),{data:m}=(0,D.Vh)({projectRef:u}),p=(null!=m?m:[]).filter(e=>e.identifier!==u),x=d===J.y6.GP3?(r-J.No[d].includedThroughput)*(null==(t=J.zN[d])?void 0:t.throughput):0,f=c===J.y6.GP3?(n-J.No[c].includedThroughput)*(null==(a=J.zN[c])?void 0:a.throughput):0;return 0===p.length?null:(0,i.jsx)(l.N,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"DiskManagementThroughputReadReplicas","data-sentry-source-file":"DiskManagementReadReplicas.tsx",children:s&&(0,i.jsx)(o.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:(0,i.jsxs)(er.Fc,{variant:"default",className:"bg-transparent",children:[(0,i.jsx)(ee.mo,{}),(0,i.jsx)(er.XL,{children:"Read replica throughput will also be updated to the same value"}),(0,i.jsx)(er.TN,{children:(0,i.jsx)("ul",{className:"list-disc pl-4 my-3 flex flex-col gap-2",children:p.map((e,t)=>(0,i.jsx)("li",{className:"marker:text-foreground-light",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{children:["ID: ",(0,eA.s)(e.identifier)," (",e.region,"):"]}),(0,i.jsx)(el,{show:!0,beforePrice:x,afterPrice:f})]})},t))})})]})})})};var eB=a(79050),eE=a(54753),eL=a(796),eZ=a(15629);async function eH(e,t){let{projectRef:a,connectionString:i}=e;if(!a)throw Error("Project ref is required");if(!i)throw Error("Connection string is required");let{result:s}=await (0,eZ.E)({projectRef:a,connectionString:i,sql:"\n    SELECT\n  (\n    SELECT\n      SUM(pg_database_size(pg_database.datname)) AS db_size_bytes\n    FROM\n      pg_database\n  ),\n  (\n    SELECT SUM(size)\n    FROM\n      pg_ls_waldir()\n  ) AS wal_size_bytes"},t);return s[0]}let eX=function(e){let{projectRef:t,connectionString:a}=e,{enabled:i=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,b.I)(N.n.diskBreakdown(t),e=>{let{signal:i}=e;return eH({projectRef:t,connectionString:a},i)},{enabled:i&&void 0!==t,...s})};function eU(e){var t,a,s,r,n;let{form:d}=e,{ref:c}=(0,h.g)(),{resolvedTheme:u}=(0,eL.D)(),{formState:p,watch:x}=d,f=null==u?void 0:u.includes("dark"),g=(0,eV.KT)(),{data:y}=T({projectRef:c}),{data:v}=eX({projectRef:c,connectionString:null==g?void 0:g.connectionString}),j=(0,m.useMemo)(()=>{var e,t,a,i,s,r,n;return{availableBytes:null!=(e=null==y?void 0:y.metrics.fs_avail_bytes)?e:0,totalUsedBytes:null!=(t=null==y?void 0:y.metrics.fs_used_bytes)?t:0,totalDiskSizeBytes:null==y?void 0:y.metrics.fs_size_bytes,dbSizeBytes:Math.max(0,null!=(a=null==v?void 0:v.db_size_bytes)?a:0),walSizeBytes:Math.max(0,null!=(i=null==v?void 0:v.wal_size_bytes)?i:0),systemBytes:Math.max(0,(null!=(s=null==y?void 0:y.metrics.fs_used_bytes)?s:0)-(null!=(r=null==v?void 0:v.db_size_bytes)?r:0)-(null!=(n=null==v?void 0:v.wal_size_bytes)?n:0))}},[y,v]),b=void 0!==p.dirtyFields.totalSize&&v,S=x("totalSize"),N=(null==(t=p.defaultValues)?void 0:t.totalSize)||0,w=Math.round((null!=(a=null==j?void 0:j.totalUsedBytes)?a:0)/F.GB*100)/100,z=Math.min(w/N*100,100),_=Math.round((null!=(s=null==j?void 0:j.dbSizeBytes)?s:0)/F.GB*100)/100,P=0===N?0:Math.min(_/N*100,100),k=Math.min(_/S*100,100),I=Math.round((null!=(r=null==j?void 0:j.walSizeBytes)?r:0)/F.GB*100)/100,C=0===N?0:Math.min(I/N*100,100),D=Math.min(I/S*100,100),M=Math.round((null!=(n=null==j?void 0:j.systemBytes)?n:0)/F.GB*100)/100,R=0===N?0:Math.min(M/N*100,100),V=Math.min(M/S*100,100),A=100*J.nU,O=100*J.nU;return(0,i.jsxs)("div",{className:"flex flex-col gap-2","data-sentry-component":"DiskSpaceBar","data-sentry-source-file":"DiskSpaceBar.tsx",children:[(0,i.jsx)("div",{className:"flex items-center h-6 gap-3",children:(0,i.jsxs)("span",{className:"text-foreground-light text-sm font-mono flex items-center gap-2",children:[w.toFixed(2),(0,i.jsx)("span",{children:"GB used of "}),(0,i.jsx)("span",{className:"text-foreground font-semibold -mt-[2px]",children:(0,i.jsx)(eB.Ay,{value:S,style:{lineHeight:.8},className:"font-mono","data-sentry-element":"MotionNumber","data-sentry-source-file":"DiskSpaceBar.tsx"})})," ","GB"]})}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("div",{className:(0,Z.cn)("h-[35px] relative border rounded-sm w-full transition",b?"bg-selection border border-brand-button":"bg-surface-300"),children:[(0,i.jsx)(l.N,{"data-sentry-element":"AnimatePresence","data-sentry-source-file":"DiskSpaceBar.tsx",children:(0,i.jsx)(o.P.div,{initial:{rotateY:90,zIndex:2},animate:{rotateY:0,zIndex:1},exit:{rotateY:-90,zIndex:2},transition:{duration:.3},style:{transformOrigin:"left center",backfaceVisibility:"hidden"},className:"absolute inset-0 rounded-sm overflow-hidden","data-sentry-element":"unknown","data-sentry-source-file":"DiskSpaceBar.tsx",children:(0,i.jsxs)("div",{className:"h-full flex",children:[(0,i.jsx)("div",{className:"relative overflow-hidden transition-all duration-500 ease-in-out bg-foreground",style:{width:"".concat(b?k:P,"%")},children:(0,i.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"repeating-linear-gradient(\n                            -45deg,\n                            ".concat(f?"rgba(0,0,0,0.1)":"rgba(255,255,255,0.1)",",\n                            ").concat(f?"rgba(0,0,0,0.1) 1px":"rgba(255,255,255,0.1) 1px",",\n                            transparent 1px,\n                            transparent 4px\n                          )")}})}),(0,i.jsx)("div",{className:"relative overflow-hidden transition-all duration-500 ease-in-out bg-_secondary",style:{width:"".concat(b?D:C,"%")}}),(0,i.jsx)("div",{className:"relative overflow-hidden transition-all duration-500 ease-in-out bg-destructive-500",style:{width:"".concat(b?V:R,"%")}}),!b&&(0,i.jsx)("div",{className:"bg-transparent-800 border-r transition-all duration-500 ease-in-out",style:{width:"".concat(A-z<=0?0:A-z,"%")}})]})},"currentBar")}),(0,i.jsx)(l.N,{"data-sentry-element":"AnimatePresence","data-sentry-source-file":"DiskSpaceBar.tsx",children:b&&(0,i.jsx)(o.P.span,{initial:{opacity:0,x:4},animate:{opacity:1,x:0},exit:{opacity:0,x:4},transition:{duration:.12,delay:.12},className:(0,Z.cn)((0,X.e)({variant:"success"}),"absolute right-1 top-[5px]"),children:"New disk size"})})]}),(0,i.jsx)(l.N,{initial:!0,"data-sentry-element":"AnimatePresence","data-sentry-source-file":"DiskSpaceBar.tsx",children:!b&&(0,i.jsx)(o.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.1},className:"absolute h-8 w-full -mx-[2px]",children:(0,i.jsxs)("div",{className:"absolute top-0 -left-0 h-full flex items-center transition-all duration-500 ease-in-out",style:{left:"".concat(b?O:A,"%")},children:[(0,i.jsxs)(en.m_,{children:[(0,i.jsx)(en.k$,{asChild:!0,children:(0,i.jsxs)("div",{className:"absolute right-full bottom-0 border mr-2 px-2 py-1 bg-surface-400 rounded text-xs text-foreground-light whitespace-nowrap flex items-center gap-x-1",children:["Autoscaling ",(0,i.jsx)(eE.A,{size:12})]})}),(0,i.jsxs)(en.ZI,{side:"bottom",className:"w-[310px] flex flex-col gap-y-1",children:[(0,i.jsx)("p",{children:"Supabase expands your disk storage automatically when the database reached 90% of the disk size. However, any disk modifications, including auto-scaling, can only take place once every 6 hours."}),(0,i.jsxs)("p",{children:["If within those 6 hours you reach 95% of the disk space, your project"," ",(0,i.jsx)("span",{className:"text-destructive-600",children:"will enter read-only mode."})]})]})]}),(0,i.jsx)("div",{className:"w-px h-full bg-border"})]})},"currentSize")})]}),!b&&(0,i.jsxs)("div",{className:"flex items-center space-x-3 text-xs text-foreground-lighter",children:[(0,i.jsx)(eq,{name:"Database",size:j.dbSizeBytes,color:"bg-foreground",description:"Total space on disk used by your database (tables, indexes, data, ...)."}),(0,i.jsx)(eq,{name:"WAL",size:j.walSizeBytes,color:"bg-_secondary",description:"Total space on disk used by the write-ahead log."}),(0,i.jsx)(eq,{name:"System",size:j.systemBytes,color:"bg-destructive-500",description:"Reserved space for the system to ensure your database runs smoothly. You cannot modify this."}),(0,i.jsx)(eq,{name:"Available space",size:j.availableBytes,color:"bg-border",description:"Total available space on the disk left."})]}),(0,i.jsxs)("p",{className:"text-xs text-foreground-lighter my-4",children:[(0,i.jsx)("span",{className:"font-semibold",children:"Note:"})," Disk Size refers to the total space your project occupies on disk, including the database itself (currently"," ",(0,i.jsx)("span",{children:(0,ei.z3)(null==j?void 0:j.dbSizeBytes,2,"GB")}),"), additional files like the write-ahead log (currently"," ",(0,i.jsx)("span",{children:(0,ei.z3)(null==j?void 0:j.walSizeBytes,2,"GB")}),"), and other system resources (currently ",(0,i.jsx)("span",{children:(0,ei.z3)(null==j?void 0:j.systemBytes,2,"GB")}),"). Data can take 5 minutes to refresh."]})]})}let eq=e=>{let{name:t,description:a,color:s,size:r}=e;return(0,i.jsxs)(en.m_,{"data-sentry-element":"Tooltip","data-sentry-component":"LegendItem","data-sentry-source-file":"DiskSpaceBar.tsx",children:[(0,i.jsx)(en.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"DiskSpaceBar.tsx",children:(0,i.jsxs)("div",{className:"flex items-center hover:cursor-help z-10",children:[(0,i.jsx)("div",{className:(0,Z.cn)("w-2 h-2 rounded-full mr-2",s)}),(0,i.jsx)("span",{children:t})]})}),(0,i.jsxs)(en.ZI,{side:"bottom",className:"flex flex-col gap-y-1 max-w-xs","data-sentry-element":"TooltipContent","data-sentry-source-file":"DiskSpaceBar.tsx",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:(0,Z.cn)("w-2 h-2 rounded-full mr-2",s)}),(0,i.jsxs)("span",{children:[t," - ",(0,ei.z3)(r,2,"GB")]})]}),(0,i.jsx)("p",{children:a})]})]})};function eY(e){let{actions:t,form:a}=e,{watch:s}=a,r=s("totalSize"),n=s("storageType")===J.y6.GP3&&r>J.No[J.y6.GP3].maxStorage,d=J.EH.find(e=>e.type===J.y6.IO2);return(0,i.jsx)(l.N,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"DiskTypeRecommendationSection","data-sentry-source-file":"DiskTypeRecommendationSection.tsx",children:n&&(0,i.jsx)(o.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.15},children:(0,i.jsx)(H.Z,{type:"default",title:"You will need to use ".concat(null==d?void 0:d.name," to use a larger Disk size"),children:(0,i.jsx)("div",{className:"flex flex-col gap-2",children:t&&(0,i.jsx)("div",{children:t})})})})})}function eJ(e){let{isDirty:t,onClick:a}=e;return(0,i.jsx)(l.N,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"InputResetButton","data-sentry-source-file":"InputResetButton.tsx",children:t&&(0,i.jsx)(o.P.div,{initial:{opacity:0,scale:.95,x:-2},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.95,x:-2},transition:{duration:.12},children:(0,i.jsx)(B.$,{htmlType:"button",type:"default",size:"small",className:"px-2 text-foreground-light",onClick:a,children:(0,i.jsx)(Q.A,{className:"h-4 w-4","aria-hidden":"true"})})},"reset-disksize")})}function eW(e){var t,a,s,r,n,l,o;let{form:d,disableInput:c,setAdvancedSettingsOpenState:u}=e,{ref:m}=(0,h.g)(),{control:p,formState:x,setValue:f,trigger:g,getValues:j,resetField:b,watch:S}=d,N=(0,O.a)(),w=(0,eV.KT)(),{isLoading:z,error:_,isError:P}=(0,v.Gc)({projectRef:m},{enabled:w&&"FLY"!==w.cloud_provider}),{data:k,error:I,isError:C}=T({projectRef:m},{enabled:w&&"FLY"!==w.cloud_provider}),D=I||_,M=C||P,R=10>eR().utc().diff(eR().utc(null==w?void 0:w.inserted_at),"minute")||(null==w?void 0:w.status)==="COMING_UP",V=S("storageType"),A=S("totalSize"),E=null!=(n=null==N?void 0:N.plan.id)?n:"free",{includedDiskGB:L}=null!=(l=null===J.Jh||void 0===J.Jh?void 0:J.Jh[E])?l:{},H=L[V],X=(0,Y.WC)({planId:E,oldSize:(null==(t=x.defaultValues)?void 0:t.totalSize)||0,oldStorageType:null==(a=x.defaultValues)?void 0:a.storageType,newSize:j("totalSize"),newStorageType:j("storageType")}),U=!!x.dirtyFields.totalSize,q=Math.round((null!=(o=null==k?void 0:k.metrics.fs_used_bytes)?o:0)/F.GB*100)/100;return(0,i.jsxs)("div",{className:"grid @xl:grid-cols-12 gap-5","data-sentry-component":"DiskSizeField","data-sentry-source-file":"DiskSizeField.tsx",children:[(0,i.jsxs)("div",{className:"col-span-4",children:[(0,i.jsx)(G.zB,{name:"totalSize",control:p,render:e=>{let{field:t}=e;return(0,i.jsx)(ej.M,{label:"Disk Size",layout:"vertical",id:t.name,children:(0,i.jsxs)("div",{className:"relative flex gap-2 items-center",children:[(0,i.jsx)(eS,{label:"GB",children:z?(0,i.jsx)("div",{className:(0,Z.cn)((0,ey.L)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,i.jsx)(ev.E,{className:"w-10 h-4"})}):(0,i.jsx)(G.MJ,{children:(0,i.jsx)(ey.p,{type:"number",id:t.name,...t,disabled:c||M,className:"w-32 font-mono rounded-r-none",onWheel:e=>e.currentTarget.blur(),onChange:e=>{f("totalSize",e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0}),g("provisionedIOPS"),g("throughput")},min:H})})}),(0,i.jsx)(eJ,{isDirty:U,onClick:()=>{b("totalSize"),g("provisionedIOPS")}})]})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"DiskSizeField.tsx"}),(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,i.jsx)(el,{className:"mt-1",beforePrice:Number(X.oldPrice),afterPrice:Number(X.newPrice),show:x.isDirty&&!x.errors.totalSize&&X.oldPrice!==X.newPrice,"data-sentry-element":"BillingChangeBadge","data-sentry-source-file":"DiskSizeField.tsx"}),(0,i.jsxs)("span",{className:"text-foreground-lighter text-sm",children:[H>0&&(null==N?void 0:N.plan.id)&&"Your plan includes ".concat(H," GB of disk size for ").concat(V,"."),(0,i.jsx)("div",{className:"mt-3",children:(0,i.jsx)(y.A,{abbrev:!1,href:"https://supabase.com/docs/guides/platform/database-size","data-sentry-element":"DocsButton","data-sentry-source-file":"DiskSizeField.tsx"})})]}),(0,i.jsx)(eY,{form:d,actions:(0,i.jsx)(B.$,{type:"default",onClick:()=>{f("storageType","io2"),g("provisionedIOPS"),g("totalSize"),u(!0)},children:"Change to High Performance SSD"}),"data-sentry-element":"DiskTypeRecommendationSection","data-sentry-source-file":"DiskSizeField.tsx"})]})]}),(0,i.jsxs)("div",{className:"col-span-8",children:[(0,i.jsx)(eU,{form:d,"data-sentry-element":"DiskSpaceBar","data-sentry-source-file":"DiskSizeField.tsx"}),R?(0,i.jsx)(eb,{message:"Disk size data is not available for ~10 minutes after project creation",type:"error"}):D&&(0,i.jsx)(eb,{message:"Failed to load disk size data",type:"error",children:null==D?void 0:D.message}),(0,i.jsx)(eO,{isDirty:void 0!==x.dirtyFields.totalSize,totalSize:1.25*((null==(s=x.defaultValues)?void 0:s.totalSize)||0),usedSize:q,newTotalSize:1.25*A,oldStorageType:null==(r=x.defaultValues)?void 0:r.storageType,newStorageType:j("storageType"),"data-sentry-element":"DiskManagementDiskSizeReadReplicas","data-sentry-source-file":"DiskSizeField.tsx"})]})]})}function e$(e){let{actions:t,form:a}=e,{watch:s}=a,r=s("computeSize"),n=s("provisionedIOPS"),d=(0,Y.u1)(n),c=n>(0,Y.T2)(null!=r?r:"ci_micro")&&!J.JM.includes(r);return(0,i.jsx)(l.N,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"ComputeSizeRecommendationSection","data-sentry-source-file":"ComputeSizeRecommendationSection.tsx",children:c&&(0,i.jsx)(o.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.15},children:(0,i.jsx)(H.Z,{type:"default",title:"Your Compute size can only support a baseline IOPS of ".concat(J.QL[r]),children:(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("div",{children:(0,i.jsxs)("p",{className:"text-sm text-foreground-light",children:["To achieve sustained IOPS performance we recommend using the"," ",(0,i.jsx)("span",{className:"text-foreground",children:(0,Y.ku)(d)})," ","compute size."]})}),t&&(0,i.jsx)("div",{children:t})]})})})})}function eQ(e){var t,a,s;let{form:r,disableInput:n}=e,{ref:l}=(0,h.g)(),{control:o,formState:d,setValue:c,trigger:u,getValues:m,watch:p}=r,x=p("storageType"),f=p("computeSize"),g=null!=(s=p("provisionedIOPS"))?s:0,{isLoading:y,error:j,isError:b}=(0,v.Gc)({projectRef:l}),S=(0,Y.t5)({oldStorageType:null==(t=d.defaultValues)?void 0:t.storageType,oldProvisionedIOPS:(null==(a=d.defaultValues)?void 0:a.provisionedIOPS)||0,newStorageType:m("storageType"),newProvisionedIOPS:m("provisionedIOPS")}),N=J.JM.includes(f)&&"gp3"===x;return(0,i.jsx)(G.zB,{control:o,name:"provisionedIOPS",render:e=>{var t,a,s,l,o;let{field:p}=e,h=(0,Y.u1)(g);return(0,i.jsxs)(ej.M,{layout:"horizontal",label:"IOPS",id:p.name,description:(0,i.jsxs)("span",{className:"flex flex-col gap-y-2",children:[(0,i.jsx)("p",{children:"Use higher IOPS for high-throughput apps."}),(0,i.jsx)(e$,{form:r,actions:(0,i.jsxs)(B.$,{type:"default",onClick:()=>{c("computeSize",null!=h?h:"ci_nano"),u("provisionedIOPS")},children:["Update to ",(0,Y.ku)(h)]})}),!d.errors.provisionedIOPS&&(0,i.jsx)(eF,{isDirty:void 0!==d.dirtyFields.provisionedIOPS,oldIOPS:null!=(o=null==(t=d.defaultValues)?void 0:t.provisionedIOPS)?o:0,newIOPS:p.value,oldStorageType:null==(a=d.defaultValues)?void 0:a.storageType,newStorageType:m("storageType")})]}),labelOptional:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(el,{show:(x!==(null==(s=d.defaultValues)?void 0:s.storageType)||"gp3"===x&&p.value!==(null==(l=d.defaultValues)?void 0:l.provisionedIOPS))&&!d.errors.provisionedIOPS&&!N,beforePrice:Number(S.oldPrice),afterPrice:Number(S.newPrice),className:"mb-2"}),(0,i.jsx)("p",{className:"text-foreground-lighter",children:"Input/output operations per second."})]}),children:[(0,i.jsx)(eS,{label:"IOPS",children:y?(0,i.jsx)("div",{className:(0,Z.cn)((0,ey.L)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,i.jsx)(ev.E,{className:"w-10 h-4"})}):(0,i.jsx)(G.MJ,{children:(0,i.jsx)(ey.p,{type:"number",className:"flex-grow font-mono rounded-r-none max-w-32",...p,value:p.value,disabled:n||N||b,onChange:e=>{c("provisionedIOPS",e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})}})})}),j&&(0,i.jsx)(eb,{type:"error",message:j.message})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-component":"IOPSField","data-sentry-source-file":"IOPSField.tsx"})}var eK=a(40990);let e0=["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","us-east-1","us-east-2","us-west-1","us-west-2"];function e1(e){var t;let{form:a,disableInput:s}=e,{control:r,trigger:n}=a,l=(0,eV.KT)(),{ref:o}=(0,h.g)(),d=e0.includes(null!=(t=null==l?void 0:l.region)?t:""),{isLoading:c,error:u,isError:m}=(0,v.Gc)({projectRef:o});return(0,i.jsx)(G.zB,{name:"storageType",control:r,render:e=>{let{field:t}=e;return(0,i.jsxs)(ej.M,{layout:"horizontal",label:"Storage type",children:[(0,i.jsxs)(eK.l6,{...t,onValueChange:async e=>{t.onChange(e),"gp3"===e?!a.getFieldState("provisionedIOPS").isDirty&&(!a.getValues("provisionedIOPS")||a.getValues("provisionedIOPS")<J.No[J.y6.GP3].minIops)&&a.setValue("provisionedIOPS",J.No[J.y6.GP3].minIops):!a.getFieldState("provisionedIOPS").isDirty&&(!a.getValues("provisionedIOPS")||a.getValues("provisionedIOPS")<J.No[J.y6.IO2].minIops)&&a.setValue("provisionedIOPS",J.No[J.y6.IO2].minIops),await n("provisionedIOPS"),await n("totalSize")},defaultValue:t.value,disabled:s||m,children:[c?(0,i.jsx)(ev.E,{className:(0,Z.cn)((0,B.r)({size:"small"}),"h-14 min-w-[420px] duration-[2s]")}):(0,i.jsx)(G.MJ,{children:(0,i.jsx)(eK.bq,{className:"h-14 max-w-[420px]",children:(0,i.jsx)(eK.yv,{})})}),(0,i.jsx)(eK.gC,{children:(0,i.jsx)(i.Fragment,{children:J.EH.map(e=>{let t="io2"===e.type&&!d;return(0,i.jsxs)(en.m_,{children:[(0,i.jsx)(en.k$,{asChild:!0,children:(0,i.jsx)(eK.eb,{disabled:s||t,value:e.type,className:(0,Z.cn)(t&&"!pointer-events-auto"),children:(0,i.jsxs)("div",{className:"flex flex-col gap-0 items-start",children:[(0,i.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,i.jsx)("span",{className:"text-sm text-foreground",children:e.name})," ",(0,i.jsx)("div",{children:(0,i.jsx)(X.E,{variant:"outline",className:"font-mono bg-alternative bg-opacity-100",children:e.type})})]}),(0,i.jsx)("p",{className:"text-foreground-light",children:e.description})]})},e.type)}),t&&(0,i.jsxs)(en.ZI,{side:"right",className:"w-64",children:["IO2 Volume Type is not available in your project's region (",null==l?void 0:l.region,"). More information available"," ",(0,i.jsx)(eP.g,{href:"https://docs.aws.amazon.com/ebs/latest/userguide/provisioned-iops.html#io2-bx-considerations",children:"here"}),"."]})]},e.type)})})})]}),u&&(0,i.jsx)(eb,{type:"error",message:u.message})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-component":"StorageTypeField","data-sentry-source-file":"StorageTypeField.tsx"})}function e2(e){var t,a;let{form:s,disableInput:r}=e,{ref:n}=(0,h.g)(),{control:d,formState:c,setValue:u,getValues:p,watch:x}=s,f=x("storageType"),g=x("totalSize"),y=x("computeSize"),j=null==(t=c.defaultValues)?void 0:t.throughput,{isLoading:b,error:S}=(0,v.Gc)({projectRef:n}),N=(0,Y.ou)({storageType:s.getValues("storageType"),newThroughput:s.getValues("throughput")||0,oldThroughput:(null==(a=s.formState.defaultValues)?void 0:a.throughput)||0}),w=J.JM.includes(y)&&"gp3"===f;return(0,m.useEffect)(()=>{if("io2"===f)u("throughput",void 0);else if("gp3"===f){let e=s.getValues("throughput"),{minThroughput:t,maxThroughput:a}=J.No[J.y6.GP3];(!e||e<t||e>a)&&u("throughput",t)}},[f,g,u,s]),(0,i.jsx)(l.N,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"ThroughputField","data-sentry-source-file":"ThroughputField.tsx",children:"gp3"===p("storageType")&&(0,i.jsx)(o.P.div,{initial:{opacity:0,x:-4,height:0},animate:{opacity:1,x:0,height:"auto"},exit:{opacity:0,x:-4,height:0},transition:{duration:.1},style:{overflow:"hidden"},children:(0,i.jsx)(G.zB,{name:"throughput",control:d,render:e=>{var t,a;let{field:s}=e;return(0,i.jsxs)(ej.M,{label:"Throughput",layout:"horizontal",description:(0,i.jsxs)("span",{className:"flex flex-col gap-y-2",children:[(0,i.jsx)("p",{children:"Higher throughput suits applications with high data transfer needs."}),!c.errors.throughput&&(0,i.jsx)(eG,{isDirty:void 0!==c.dirtyFields.throughput,oldThroughput:null!=j?j:0,newThroughput:null!=(a=s.value)?a:0,oldStorageType:null==(t=c.defaultValues)?void 0:t.storageType,newStorageType:p("storageType")})]}),labelOptional:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(el,{show:c.isDirty&&c.dirtyFields.throughput&&!c.errors.throughput,beforePrice:Number(N.oldPrice),afterPrice:Number(N.newPrice),className:"mb-2"}),(0,i.jsx)("p",{className:"text-foreground-lighter",children:"Amount of data read/written per second."})]}),children:[(0,i.jsx)(eS,{label:"MB/s",children:b?(0,i.jsx)("div",{className:(0,Z.cn)((0,ey.L)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,i.jsx)(ev.E,{className:"w-10 h-4"})}):(0,i.jsx)(G.MJ,{children:(0,i.jsx)(ey.p,{type:"number",...s,value:s.value,onChange:e=>{u("throughput",e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})},className:"flex-grow font-mono rounded-r-none max-w-32",disabled:r||w||"io2"===f})})}),S&&(0,i.jsx)(eb,{type:"error",message:S.message})]})}})},"throughPutContainer")})}let e3=e=>{let{seconds:t}=e,a=Math.floor(t/3600),s=Math.floor(t%3600/60),r={minimumIntegerDigits:2},n=e=>e.toString().padStart(2,"0");return(0,i.jsxs)("span",{className:"inline-flex gap-2","data-sentry-component":"CountdownTimerSpan","data-sentry-source-file":"CountdownTimerSpan.tsx",children:[(0,i.jsx)("span",{className:"text-foreground-lighter text-sm p-0",children:"Time remaining: "}),(0,i.jsxs)("span",{className:"text-foreground text-sm font-mono flex items-center gap-0",children:[(0,i.jsx)(eB.Ay,{format:r,value:Number(n(a)),"data-sentry-element":"MotionNumber","data-sentry-source-file":"CountdownTimerSpan.tsx"}),"hr",(0,i.jsx)(eB.Ay,{format:r,value:Number(n(s)),"data-sentry-element":"MotionNumber","data-sentry-source-file":"CountdownTimerSpan.tsx"}),"m",(0,i.jsx)(eB.Ay,{format:r,value:Number(n(t%60)),"data-sentry-element":"MotionNumber","data-sentry-source-file":"CountdownTimerSpan.tsx"})]})]})};var e4=a(82228);function e5(){let{ref:e}=(0,h.g)(),[t,a]=(0,m.useState)(0),{remainingDuration:s,error:r,isSuccess:n}=(0,v.Zj)({projectRef:e}),d=t/j.Xz*100;return(0,m.useEffect)(()=>{s>0&&a(s)},[s]),(0,m.useEffect)(()=>{if(t<=0)return;let e=setInterval(()=>{a(Math.max(0,t-1))},1e3);return()=>clearInterval(e)},[t]),(0,i.jsxs)(l.N,{"data-sentry-element":"AnimatePresence","data-sentry-component":"DiskCountdownRadial","data-sentry-source-file":"DiskCountdownRadial.tsx",children:[t>0&&n&&(0,i.jsx)(o.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:(0,i.jsx)(e4.Zp,{className:"px-2 rounded bg-surface-100",children:(0,i.jsxs)(e4.Wu,{className:"py-3 flex gap-3 px-3 items-start",children:[(0,i.jsx)(ep,{progress:d}),(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-foreground text-sm p-0",children:"6-hour cooldown period is in progress"}),(0,i.jsx)("p",{className:"text-foreground-lighter text-sm p-0",children:"You can't modify your disk configuration again until the 6-hour cool down period ends."})]}),(0,i.jsx)(e3,{seconds:t})]})]})})}),r&&(0,i.jsx)(eb,{message:r.message,type:"error"})]})}function e6(){let e=(0,O.a)(),t=(0,eV.KT)(),a=(null==e?void 0:e.plan.id)!=="free"&&!(null==e?void 0:e.usage_billing_enabled)&&(null==t?void 0:t.cloud_provider)!=="FLY";return(0,i.jsx)(l.N,{"data-sentry-element":"AnimatePresence","data-sentry-component":"SpendCapDisabledSection","data-sentry-source-file":"SpendCapDisabledSection.tsx",children:a&&(0,i.jsx)(o.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:(0,i.jsxs)(H.Z,{type:"default",children:[(0,i.jsx)(er.XL,{children:"Disable spend cap to manage Disk configuration"}),(0,i.jsx)(er.TN,{children:"To access disk management features, you need to disable your spend cap. These features offer more flexibility and control over your database disk size."}),(0,i.jsx)("div",{className:"mt-3",children:(0,i.jsx)(u(),{href:"/org/".concat(null==e?void 0:e.slug,"/billing?panel=costControl"),className:(0,Z.cn)((0,B.r)({type:"default",size:"tiny"})),children:"Disable spend cap"})})]})})})}function e8(){var e,t,a,c;let{project:b,isLoading:S}=(0,f.Om)(),N=(0,O.a)(),{ref:w}=(0,h.g)(),_=(0,n.jE)(),{data:P}=(0,V.p)(),I=null==(e=null!=P?P:[])?void 0:e.find(e=>e.project===(null==b?void 0:b.ref)),X=null==I?void 0:I.is_readonly_mode_enabled,q=(0,eV.lh)(),W=(0,eV.BA)(),Q=(0,A.Lh)(),K=(0,A.SE)(r.aG.UPDATE,"projects",{resource:{project_id:null==b?void 0:b.id}}),[ee,ea]=(0,m.useState)(!1),[ei,es]=(0,m.useState)(!1),[er,en]=(0,m.useState)(null),[el,eo]=(0,m.useState)(!1),{data:ed,isSuccess:ec}=(0,D.Vh)({projectRef:w}),{data:eu,isSuccess:em}=(0,v.Gc)({projectRef:w},{refetchInterval:ei,refetchOnWindowFocus:!1,onSuccess:e=>{var t;let{type:a,iops:i,throughput_mbps:s,size_gb:r}=null!=(t=null==e?void 0:e.attributes)?t:{size_gb:0};"requested_modification"in e?es(2e3):!1!==ei&&(eM.reset({storageType:a,provisionedIOPS:i,throughput:s,totalSize:r}),es(!1),x.oR.success("Disk configuration changes have been successfully applied!"))},enabled:null!=b&&q}),{isSuccess:ep}=(0,R.Q)({projectRef:w}),{isWithinCooldownWindow:ex,isSuccess:eh}=(0,v.Zj)({projectRef:w,enabled:null!=b&&q}),{data:ef,isSuccess:ey}=T({projectRef:w},{enabled:null!=b&&q}),{data:ev,isSuccess:ej}=z({projectRef:w},{enabled:null!=b&&q}),eb=(null==b?void 0:b.infra_compute_size)?(0,Y.$6)(null==b?void 0:b.infra_compute_size):void 0,{type:eS,iops:ew,throughput_mbps:ez,size_gb:e_}=null!=(a=null==eu?void 0:eu.attributes)?a:{size_gb:0,iops:0},{growth_percent:eP,max_size_gb:ek,min_increment_gb:eI}=null!=ev?ev:{},eT={storageType:null!=eS?eS:J.y6.GP3,provisionedIOPS:ew,throughput:ez,totalSize:e_,computeSize:eb,growthPercent:eP,minIncrementGb:eI,maxSizeGb:ek},eM=(0,p.mN)({resolver:(0,s.u)($(eT.totalSize,null==b?void 0:b.cloud_provider)),defaultValues:eT,mode:"onBlur",reValidateMode:"onChange"}),{computeSize:eR}=eM.watch();(0,m.useEffect)(()=>{eR&&(null==b?void 0:b.infra_compute_size)&&ee&&J.eQ.includes(eR)&&(eM.setValue("storageType",J.y6.GP3),eM.setValue("throughput",J.No.gp3.minThroughput),eM.setValue("provisionedIOPS",J.No.gp3.minIops))},[eR,ee,b]);let eA=ep&&em&&ey&&ec&&ej&&eh,eO=(null==eu?void 0:eu.requested_modification)!==void 0,eF=(null!=ed?ed:[]).filter(e=>e.identifier!==w),eG=(null==N?void 0:N.plan.id)==="free",{formState:eB}=eM,eE=Math.round((null!=(c=null==ef?void 0:ef.metrics.fs_used_bytes)?c:0)/F.GB*100)/100,eL=(null==(t=eB.defaultValues)?void 0:t.totalSize)||0,eZ=J.eQ.includes(eM.watch("computeSize"))&&(null==N?void 0:N.plan.id)!=="free",eH=(null==b?void 0:b.parent_project_ref)!==void 0,eX=eO||eG||ex||!K||!q,eU=!!Object.keys(eM.formState.dirtyFields).length,eq=(null==b?void 0:b.status)===F.BU.RESIZING,eY=eO&&!eq,eJ=Q&&!K&&!S,{mutateAsync:e$,isLoading:eK}=(0,j._J)({onError:()=>{},onSuccess:()=>es(2e3)}),{mutateAsync:e0,isLoading:e3}=(0,M.F)({onError:()=>{},onSuccess:()=>{(0,C.Mi)(_,w,F.BU.RESIZING)}}),{mutateAsync:e4,isLoading:e8}=k({onError:()=>{}}),e9=async e=>{let t=!1;en(null);try{var a,i,s,r,n,l,o,d;(e.storageType!==(null==(a=eM.formState.defaultValues)?void 0:a.storageType)||e.provisionedIOPS!==(null==(i=eM.formState.defaultValues)?void 0:i.provisionedIOPS)||e.throughput!==(null==(s=eM.formState.defaultValues)?void 0:s.throughput)||e.totalSize!==(null==(r=eM.formState.defaultValues)?void 0:r.totalSize))&&(t=!0,await e$({ref:w,provisionedIOPS:e.provisionedIOPS,storageType:e.storageType,totalSize:e.totalSize,throughput:e.throughput})),(e.growthPercent!==(null==(n=eM.formState.defaultValues)?void 0:n.growthPercent)||e.minIncrementGb!==(null==(l=eM.formState.defaultValues)?void 0:l.minIncrementGb)||e.maxSizeGb!==(null==(o=eM.formState.defaultValues)?void 0:o.maxSizeGb))&&await e4({projectRef:w,growthPercent:e.growthPercent,minIncrementGb:e.minIncrementGb,maxSizeGb:e.maxSizeGb}),e.computeSize!==(null==(d=eM.formState.defaultValues)?void 0:d.computeSize)&&await e0({projectRef:w,variant:e.computeSize,type:"compute_instance",suppressToast:!0}),ea(!1),eM.reset(e),x.oR.success("Successfully updated disk settings!".concat(t?" The requested changes will be applied to your disk shortly.":""))}catch(e){en({message:e instanceof Error?e.message:"An unknown error occurred",type:"error"})}};return(0,m.useEffect)(()=>{(em||eA)&&eM.reset(eT,{})},[eA,em]),(0,i.jsx)(G.lV,{...eM,"data-sentry-element":"Form_Shadcn_","data-sentry-component":"DiskManagementForm","data-sentry-source-file":"DiskManagementForm.tsx",children:(0,i.jsxs)("form",{onSubmit:eM.handleSubmit(e9),className:"flex flex-col gap-8",children:[(0,i.jsxs)(g.eh,{className:"relative flex flex-col gap-10",bottomPadding:!0,"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"DiskManagementForm.tsx",children:[(0,i.jsx)(eC.Y,{type:"default",visible:eG,title:"Compute and Disk configuration is not available on the Free Plan",actions:(0,i.jsx)(B.$,{type:"default",asChild:!0,children:(0,i.jsx)(u(),{href:"/org/".concat(null==N?void 0:N.slug,"/billing?panel=subscriptionPlan&source=diskManagementConfigure"),children:"Upgrade plan"})}),description:"You will need to upgrade to at least the Pro Plan to configure compute and disk","data-sentry-element":"NoticeBar","data-sentry-source-file":"DiskManagementForm.tsx"}),eq||eY||eJ?(0,i.jsxs)("div",{className:"relative flex flex-col gap-10",children:[(0,i.jsx)(et,{visible:eq,title:"Your project will now automatically restart.",description:"Your project will be unavailable for up to 2 mins."}),(0,i.jsx)(eC.Y,{type:"default",visible:eY,title:"Disk configuration changes have been requested",description:"The requested changes will be applied to your disk shortly"}),(0,i.jsx)(eC.Y,{type:"default",visible:eJ,title:"You do not have permission to update disk configuration",description:"Please contact your organization administrator to update your disk configuration"})]}):null,(0,i.jsx)(E.w,{"data-sentry-element":"Separator","data-sentry-source-file":"DiskManagementForm.tsx"}),(0,i.jsx)(eD,{form:eM,disabled:eG,"data-sentry-element":"ComputeSizeField","data-sentry-source-file":"DiskManagementForm.tsx"}),(0,i.jsx)(E.w,{"data-sentry-element":"Separator","data-sentry-source-file":"DiskManagementForm.tsx"}),(0,i.jsx)(e6,{"data-sentry-element":"SpendCapDisabledSection","data-sentry-source-file":"DiskManagementForm.tsx"}),(0,i.jsx)(eC.Y,{type:"default",visible:!q,title:"Disk configuration is only available for projects in the AWS cloud provider",description:W?"Configuring your disk for AWS (Revamped) projects is unavailable for now.":eH?"Delete and recreate your Preview Branch to configure disk size. It was deployed on an older branching infrastructure.":"The Fly Postgres offering is deprecated - please migrate your instance to the AWS cloud prov to configure your disk.","data-sentry-element":"NoticeBar","data-sentry-source-file":"DiskManagementForm.tsx"}),q&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,i.jsx)(e5,{}),!X&&eE/eL*100>=90&&ex&&(0,i.jsx)(H.Z,{type:"destructive",title:"Database size is currently over 90% of disk size",description:"Your project will enter read-only mode once you reach 95% of the disk space to prevent your database from exceeding the disk limitations",children:(0,i.jsx)(y.A,{abbrev:!1,className:"mt-2",href:"https://supabase.com/docs/guides/platform/database-size#read-only-mode"})}),X&&(0,i.jsx)(H.Z,{type:"destructive",title:"Project is currently in read-only mode",description:"You will need to manually override read-only mode and reduce the database size to below 95% of the disk size",children:(0,i.jsx)(y.A,{abbrev:!1,className:"mt-2",href:"https://supabase.com/docs/guides/platform/database-size#disabling-read-only-mode"})})]}),(0,i.jsx)(eW,{form:eM,disableInput:eX,setAdvancedSettingsOpenState:eo}),(0,i.jsx)(E.w,{}),(0,i.jsxs)(L.Nt,{className:"-space-y-px",open:el,onOpenChange:()=>eo(e=>!e),children:[(0,i.jsxs)(L.R6,{className:"px-8 py-3 w-full border flex items-center gap-6 rounded-t data-[state=closed]:rounded-b group justify-between",children:[(0,i.jsxs)("div",{className:"flex flex-col items-start",children:[(0,i.jsx)("span",{className:"text-sm text-foreground",children:"Advanced disk settings"}),(0,i.jsx)("span",{className:"text-sm text-foreground-light text-left",children:"Specify additional settings for your disk, including autoscaling configuration, IOPS, throughput, and disk type."})]}),(0,i.jsx)(d.A,{size:16,className:"text-foreground-light transition-all group-data-[state=open]:rotate-90",strokeWidth:1})]}),(0,i.jsxs)(L.Ke,{className:(0,Z.cn)("flex flex-col gap-8 py-8 transition-all","data-[state=open]:border data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down"),children:[(0,i.jsx)("div",{className:"px-8 flex flex-col gap-y-8",children:(0,i.jsx)(eN,{form:eM})}),(0,i.jsx)(E.w,{}),(0,i.jsxs)("div",{className:"px-8 flex flex-col gap-y-8",children:[(0,i.jsx)(eC.Y,{type:"default",visible:eZ,title:"Adjusting disk configuration requires LARGE Compute size or above",description:"Increase your compute size to adjust your disk's storage type, ".concat("gp3"===eM.getValues("storageType")?"IOPS, ":""," and throughput"),actions:(0,i.jsx)(B.$,{type:"default",onClick:()=>{eM.setValue("computeSize","ci_large")},children:"Change to LARGE Compute"})}),(0,i.jsx)(e1,{form:eM,disableInput:eZ||eX}),(0,i.jsx)(eQ,{form:eM,disableInput:eZ||eX}),(0,i.jsx)(e2,{form:eM,disableInput:eZ||eX})]})]})]})]})]}),(0,i.jsx)(l.N,{"data-sentry-element":"AnimatePresence","data-sentry-source-file":"DiskManagementForm.tsx",children:eU?(0,i.jsx)(o.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.1,delay:.2},className:"z-10 w-full left-0 right-0 sticky bottom-0 bg-surface-100 border-t h-16 items-center flex",children:(0,i.jsxs)("div",{className:(0,Z.cn)(g.bV,g.BS,"flex items-center gap-3 justify-end"),children:[(0,i.jsx)(U,{formState:eB}),(0,i.jsx)(B.$,{type:"default",onClick:()=>eM.reset(),disabled:!eU,size:"medium",children:"Cancel"}),(0,i.jsx)(eg,{loading:eK||e3||e8,disabled:eJ,form:eM,numReplicas:eF.length,isDialogOpen:ee,onSubmit:e9,setIsDialogOpen:ea,message:er})]})}):null})]})})}var e9=a(62146),e7=a(66452);let te=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"compute-and-disk.tsx",children:(0,i.jsxs)(g.Uw,{"data-sentry-element":"ScaffoldHeader","data-sentry-source-file":"compute-and-disk.tsx",children:[(0,i.jsx)(g.Dm,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"compute-and-disk.tsx",children:"Compute and Disk"}),(0,i.jsx)(g.dX,{"data-sentry-element":"ScaffoldDescription","data-sentry-source-file":"compute-and-disk.tsx",children:"Configure the compute and disk settings for your project."})]})}),(0,i.jsx)(e8,{"data-sentry-element":"DiskManagementForm","data-sentry-source-file":"compute-and-disk.tsx"})]});te.getLayout=e=>(0,i.jsx)(e9.A,{children:(0,i.jsx)(e7.A,{children:e})});let tt=te},66452:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var i=a(80263),s=a(24400),r=a(53239),n=a(90478),l=a(90226),o=a(97600),d=a(23385),c=a(5483),u=a(52361),m=a(63492),p=a(78098),x=a(60018);let h=(0,u.r)(e=>{let{title:t,children:a}=e,u=(0,s.useRouter)(),{ref:h}=(0,n.g)(),f=(0,c.KT)(),g=(0,d.a)();(0,r.useEffect)(()=>{m.pe||u.push("/project/default")},[u]);let y=u.pathname.includes("billing")?u.pathname.split("/")[5]:u.pathname.split("/")[4],{projectAuthAll:v,projectEdgeFunctionAll:j,projectStorageAll:b,billingInvoices:S}=(0,o.x)(["project_auth:all","project_edge_function:all","project_storage:all","billing:invoices"]),N=(0,x.M)(h,f,g,{auth:v,edgeFunctions:j,storage:b,invoices:S});return(0,i.jsx)(p.A,{isBlocking:!1,title:t||"Settings",product:"Settings",productMenu:(0,i.jsx)(l.l,{page:y,menu:N}),"data-sentry-element":"ProjectLayout","data-sentry-component":"SettingsLayout","data-sentry-source-file":"SettingsLayout.tsx",children:a})})},69914:(e,t,a)=>{"use strict";a.d(t,{g:()=>s});var i=a(63492);function s(e){switch(e){case i.xq.AWS.id:return"ARM";case i.xq.FLY.id:return"x86 64-bit";default:return""}}},73047:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var i=a(80263),s=a(15601),r=a.n(s),n=a(43242),l=a(2119),o=a(40022);let d=e=>{let{name:t="",isActive:a,isExternal:s,icon:d,rightIcon:c,url:u="",target:m="_self",onClick:p,textClassName:x="",hoverText:h="",label:f}=e,g=(0,i.jsx)(n.Ay.Item,{icon:d,rounded:!0,active:a,onClick:p,children:(0,i.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,i.jsxs)("div",{title:h||("string"==typeof t?t:""),className:"flex items-center gap-2 truncate w-full "+x,children:[(0,i.jsxs)("span",{className:"truncate",children:[t," "]}),void 0!==f&&(0,i.jsx)(l.E,{variant:"warning",className:"py-0 px-1.5 capitalize",children:f})]}),c&&(0,i.jsx)("div",{children:c})]})});return u?s?(0,i.jsx)(o.$,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:d,children:(0,i.jsx)(r(),{href:u,target:"_blank",rel:"noreferrer",children:t})}):(0,i.jsx)(r(),{href:u,className:"block",target:m,children:g}):g}},82228:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>l,wL:()=>u});var i=a(80263),s=a(53239),r=a(51500);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-surface-100 text-card-foreground shadow-sm",a),...s})});n.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 py-4 px-6 border-b",a),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("h3",{ref:t,className:(0,r.cn)("text-xs font-mono uppercase",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-foreground-muted",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("div",{ref:t,className:(0,r.cn)("py-4 px-6 border-b last:border-none",a),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("div",{ref:t,className:(0,r.cn)(" flex items-center py-4 px-6",a),...s})});u.displayName="CardFooter"},90226:(e,t,a)=>{"use strict";a.d(t,{l:()=>l});var i=a(80263),s=a(43242),r=a(2119),n=a(73047);let l=e=>{let{page:t,menu:a}=e;return(0,i.jsx)("div",{className:"flex flex-col space-y-8 overflow-y-auto","data-sentry-component":"ProductMenu","data-sentry-source-file":"ProductMenu.tsx",children:(0,i.jsx)(s.Ay,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"ProductMenu.tsx",children:a.map((e,l)=>(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"my-6 space-y-8",children:(0,i.jsxs)("div",{className:"mx-3",children:[(0,i.jsx)(s.Ay.Group,{title:e.title?(0,i.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,i.jsx)("span",{children:e.title}),e.isPreview&&(0,i.jsx)(r.E,{variant:"warning",children:"Not production ready"})]}):null}),(0,i.jsx)("div",{children:e.items.map(e=>{let a=e.pages?e.pages.includes(null!=t?t:""):t===e.key;return(0,i.jsx)(n.A,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:a,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),l!==a.length-1&&(0,i.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},92882:(e,t,a)=>{"use strict";a.d(t,{BS:()=>l,Dm:()=>c,HJ:()=>v,Rf:()=>g,Uw:()=>d,Vw:()=>S,Xr:()=>b,aw:()=>h,bV:()=>n,cJ:()=>p,dX:()=>u,eh:()=>o,fh:()=>j,gu:()=>m,sZ:()=>x,tn:()=>y,xp:()=>f});var i=a(80263),s=a(53239),r=a(51500);let n="mx-auto w-full max-w-[1200px]",l="px-4 @lg:px-6 @xl:px-12 @2xl:px-20 @3xl:px-24",o=(0,s.forwardRef)((e,t)=>{let{className:a,bottomPadding:s,size:n="default",...o}=e;return(0,i.jsx)("div",{ref:t,...o,className:(0,r.cn)("mx-auto w-full",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[n],l,s&&"pb-16",a)})}),d=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("header",{...s,ref:t,className:(0,r.cn)("w-full","flex-col gap-3 py-6",a)})}),c=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("h1",{ref:t,...s,className:(0,r.cn)("text-2xl",a)})}),u=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("p",{ref:t,...s,className:(0,r.cn)("text-sm text-foreground-light",a)})}),m=(0,s.forwardRef)((e,t)=>{let{className:a,isFullWidth:s,topPadding:n,...l}=e;return(0,i.jsx)("div",{ref:t,...l,className:(0,r.cn)("flex flex-col first:pt-12 py-6",s?"w-full":"gap-3 lg:grid md:grid-cols-12",a)})}),p=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("div",{ref:t,...s,className:(0,r.cn)("w-full h-px bg-border",a)})}),x=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("h3",{ref:t,...s,className:(0,r.cn)("text-foreground text-xl",a)})}),h=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("p",{ref:t,...s,className:(0,r.cn)("text-sm text-foreground-light",a)})}),f=(0,s.forwardRef)((e,t)=>{let{className:a,children:s,title:n,...l}=e;return(0,i.jsxs)("div",{ref:t,...l,className:(0,r.cn)("col-span-4 xl:col-span-5 prose text-sm",a),children:[n&&(0,i.jsx)("h2",{children:n}),s]})}),g=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("div",{ref:t,...s,className:(0,r.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",a)})}),y=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("div",{ref:t,...s,className:(0,r.cn)("flex flex-col gap-3 items-center",a)})}),v=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("div",{ref:t,...s,className:(0,r.cn)("flex w-full items-center",a)})}),j=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("div",{ref:t,...s,className:(0,r.cn)("flex flex-row gap-3",a)})}),b=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("div",{ref:t,...s,className:(0,r.cn)("flex flex-col gap-3","min-w-[420px]",a)})}),S=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("div",{ref:t,...s,className:(0,r.cn)(n,l,"my-8 flex flex-col gap-8",a)})});d.displayName="ScaffoldHeader",c.displayName="ScaffoldTitle",u.displayName="ScaffoldDescription",o.displayName="ScaffoldContainer",p.displayName="ScaffoldDivider",m.displayName="ScaffoldSection",b.displayName="ScaffoldColumn",f.displayName="ScaffoldSectionDetail",g.displayName="ScaffoldSectionContent",y.displayName="ScaffoldFilterAndContent",v.displayName="ScaffoldActionsContainer",j.displayName="ScaffoldActionsGroup",S.displayName="ScaffoldContainerLegacy",x.displayName="ScaffoldSectionTitle",h.displayName="ScaffoldSectionDescription"},93453:(e,t,a)=>{"use strict";a.d(t,{Xz:()=>o,_J:()=>c});var i=a(32144),s=a(80251),r=a(73969),n=a(65172),l=a(47114);let o=21600;async function d(e){if(!e.ref)throw Error("ref is required");let t="gp3"===e.storageType?{iops:e.provisionedIOPS,throughput_mbps:e.throughput,size_gb:e.totalSize,type:e.storageType}:{iops:e.provisionedIOPS,size_gb:e.totalSize,type:e.storageType},{data:a,error:i}=await (0,n.bE)("/platform/projects/{ref}/disk",{params:{path:{ref:e.ref}},body:{attributes:t}});return i&&(0,n.H4)(i),a}let c=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,i.jE)();return(0,s.n)(e=>d(e),{async onSuccess(t,a,i){let{ref:s}=a;await n.invalidateQueries(l.n.diskAttributes(s)),await (null==e?void 0:e(t,a,i))},async onError(e,a,i){void 0===t?r.oR.error("Failed to update disk attributes: ".concat(e.message)):t(e,a,i)},...a})}},96132:(e,t,a)=>{"use strict";a.d(t,{Y:()=>l});var i=a(80263),s=a(88712),r=a(37055),n=a(47142);function l(e){let{visible:t,description:a,actions:l,...o}=e;return(0,i.jsx)(s.N,{"data-sentry-element":"AnimatePresence","data-sentry-component":"NoticeBar","data-sentry-source-file":"NoticeBar.tsx",children:t&&(0,i.jsx)(r.P.div,{initial:{opacity:0,height:0,y:4},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:4},transition:{duration:.15},children:(0,i.jsxs)(n.Z,{...o,children:[a,(0,i.jsx)("div",{className:"flex flex-col gap-2",children:l&&(0,i.jsx)("div",{className:"mt-2",children:l})})]})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[89,726,4280,3730,2981,6110,386,7661,5599,8445,4849,3019,1680,7654,8274,6,3634,5007,4017,890,9014,7795,4444,7182,1191,1715,8821,1099,2146,5756,8098,6593,636,8792],()=>t(47607)),_N_E=e.O()}]);